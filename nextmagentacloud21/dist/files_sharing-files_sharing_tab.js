/*! For license information please see files_sharing-files_sharing_tab.js.LICENSE.txt */
!function(){"use strict";var n,e={42514:function(n,e,r){var i=r(20144),a=r(72268),s=r.n(a),o=r(9944),l=r(1794),c=r(79753),u=r(28017),h=r.n(u),d=r(4820);function p(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}var f=function(){function n(){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n)}var e,t;return e=n,(t=[{key:"isPublicUploadEnabled",get:function(){return document.getElementById("filestable")&&"yes"===document.getElementById("filestable").dataset.allowPublicUpload}},{key:"isShareWithLinkAllowed",get:function(){return document.getElementById("allowShareWithLink")&&"yes"===document.getElementById("allowShareWithLink").value}},{key:"federatedShareDocLink",get:function(){return OC.appConfig.core.federatedCloudShareDoc}},{key:"defaultExpirationDateString",get:function(){var n="";if(this.isDefaultExpireDateEnabled){var e=window.moment.utc(),t=this.defaultExpireDate;e.add(t,"days"),n=e.format("YYYY-MM-DD")}return n}},{key:"defaultInternalExpirationDateString",get:function(){var n="";if(this.isDefaultInternalExpireDateEnabled){var e=window.moment.utc(),t=this.defaultInternalExpireDate;e.add(t,"days"),n=e.format("YYYY-MM-DD")}return n}},{key:"defaultRemoteExpirationDateString",get:function(){var n="";if(this.isDefaultRemoteExpireDateEnabled){var e=window.moment.utc(),t=this.defaultRemoteExpireDate;e.add(t,"days"),n=e.format("YYYY-MM-DD")}return n}},{key:"enforcePasswordForPublicLink",get:function(){return!0===OC.appConfig.core.enforcePasswordForPublicLink}},{key:"enableLinkPasswordByDefault",get:function(){return!0===OC.appConfig.core.enableLinkPasswordByDefault}},{key:"isDefaultExpireDateEnforced",get:function(){return!0===OC.appConfig.core.defaultExpireDateEnforced}},{key:"isDefaultExpireDateEnabled",get:function(){return!0===OC.appConfig.core.defaultExpireDateEnabled}},{key:"isDefaultInternalExpireDateEnforced",get:function(){return!0===OC.appConfig.core.defaultInternalExpireDateEnforced}},{key:"isDefaultRemoteExpireDateEnforced",get:function(){return!0===OC.appConfig.core.defaultRemoteExpireDateEnforced}},{key:"isDefaultInternalExpireDateEnabled",get:function(){return!0===OC.appConfig.core.defaultInternalExpireDateEnabled}},{key:"isRemoteShareAllowed",get:function(){return!0===OC.appConfig.core.remoteShareAllowed}},{key:"isMailShareAllowed",get:function(){var n,e,t,r=OC.getCapabilities();return void 0!==(null==r||null===(n=r.files_sharing)||void 0===n?void 0:n.sharebymail)&&!0===(null==r||null===(e=r.files_sharing)||void 0===e||null===(t=e.public)||void 0===t?void 0:t.enabled)}},{key:"defaultExpireDate",get:function(){return OC.appConfig.core.defaultExpireDate}},{key:"defaultInternalExpireDate",get:function(){return OC.appConfig.core.defaultInternalExpireDate}},{key:"defaultRemoteExpireDate",get:function(){return OC.appConfig.core.defaultRemoteExpireDate}},{key:"isResharingAllowed",get:function(){return!0===OC.appConfig.core.resharingAllowed}},{key:"isPasswordForMailSharesRequired",get:function(){return void 0!==OC.getCapabilities().files_sharing.sharebymail&&OC.getCapabilities().files_sharing.sharebymail.password.enforced}},{key:"shouldAlwaysShowUnique",get:function(){var n,e;return!0===(null===(n=OC.getCapabilities().files_sharing)||void 0===n||null===(e=n.sharee)||void 0===e?void 0:e.always_show_unique)}},{key:"allowGroupSharing",get:function(){return!0===OC.appConfig.core.allowGroupSharing}},{key:"maxAutocompleteResults",get:function(){return parseInt(OC.config["sharing.maxAutocompleteResults"],10)||25}},{key:"minSearchStringLength",get:function(){return parseInt(OC.config["sharing.minSearchStringLength"],10)||0}},{key:"passwordPolicy",get:function(){var n=OC.getCapabilities();return n.password_policy?n.password_policy:{}}}])&&p(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),n}(),g=r(41922);function m(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}var A=function(){function n(e){var t,r,i;if(function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),i=void 0,(r="_share")in this?Object.defineProperty(this,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):this[r]=i,e.ocs&&e.ocs.data&&e.ocs.data[0]&&(e=e.ocs.data[0]),e.hide_download=!!e.hide_download,e.mail_send=!!e.mail_send,e.attributes)try{e.attributes=JSON.parse(e.attributes)}catch(n){console.warn('Could not parse share attributes returned by server: "'+e.attributes+'"')}e.attributes=null!==(t=e.attributes)&&void 0!==t?t:[],this._share=e}var e,t;return e=n,(t=[{key:"state",get:function(){return this._share}},{key:"id",get:function(){return this._share.id}},{key:"type",get:function(){return this._share.share_type}},{key:"permissions",get:function(){return this._share.permissions},set:function(n){this._share.permissions=n}},{key:"attributes",get:function(){return this._share.attributes}},{key:"owner",get:function(){return this._share.uid_owner}},{key:"ownerDisplayName",get:function(){return this._share.displayname_owner}},{key:"shareWith",get:function(){return this._share.share_with}},{key:"shareWithDisplayName",get:function(){return this._share.share_with_displayname||this._share.share_with}},{key:"shareWithDisplayNameUnique",get:function(){return this._share.share_with_displayname_unique||this._share.share_with}},{key:"shareWithLink",get:function(){return this._share.share_with_link}},{key:"shareWithAvatar",get:function(){return this._share.share_with_avatar}},{key:"uidFileOwner",get:function(){return this._share.uid_file_owner}},{key:"displaynameFileOwner",get:function(){return this._share.displayname_file_owner||this._share.uid_file_owner}},{key:"createdTime",get:function(){return this._share.stime}},{key:"expireDate",get:function(){return this._share.expiration},set:function(n){this._share.expiration=n}},{key:"token",get:function(){return this._share.token}},{key:"note",get:function(){return this._share.note},set:function(n){this._share.note=n}},{key:"label",get:function(){return this._share.label},set:function(n){this._share.label=n}},{key:"mailSend",get:function(){return!0===this._share.mail_send}},{key:"hideDownload",get:function(){return!0===this._share.hide_download},set:function(n){this._share.hide_download=!0===n}},{key:"password",get:function(){return this._share.password},set:function(n){this._share.password=n}},{key:"passwordExpirationTime",get:function(){return this._share.password_expiration_time},set:function(n){this._share.password_expiration_time=n}},{key:"sendPasswordByTalk",get:function(){return this._share.send_password_by_talk},set:function(n){this._share.send_password_by_talk=n}},{key:"path",get:function(){return this._share.path}},{key:"itemType",get:function(){return this._share.item_type}},{key:"mimetype",get:function(){return this._share.mimetype}},{key:"fileSource",get:function(){return this._share.file_source}},{key:"fileTarget",get:function(){return this._share.file_target}},{key:"fileParent",get:function(){return this._share.file_parent}},{key:"hasReadPermission",get:function(){return!!(this.permissions&OC.PERMISSION_READ)}},{key:"hasCreatePermission",get:function(){return!!(this.permissions&OC.PERMISSION_CREATE)}},{key:"hasDeletePermission",get:function(){return!!(this.permissions&OC.PERMISSION_DELETE)}},{key:"hasUpdatePermission",get:function(){return!!(this.permissions&OC.PERMISSION_UPDATE)}},{key:"hasSharePermission",get:function(){return!!(this.permissions&OC.PERMISSION_SHARE)}},{key:"hasDownloadPermission",get:function(){for(var n in this._share.attributes){var e=this._share.attributes[n];if("permissions"===e.scope&&"download"===e.key)return e.enabled}return!0},set:function(n){this.setAttribute("permissions","download",!!n)}},{key:"setAttribute",value:function(n,e,t){var r={scope:n,key:e,enabled:t};for(var i in this._share.attributes){var a=this._share.attributes[i];if(a.scope===r.scope&&a.key===r.key)return void(this._share.attributes[i]=r)}this._share.attributes.push(r)}},{key:"canEdit",get:function(){return!0===this._share.can_edit}},{key:"canDelete",get:function(){return!0===this._share.can_delete}},{key:"viaFileid",get:function(){return this._share.via_fileid}},{key:"viaPath",get:function(){return this._share.via_path}},{key:"parent",get:function(){return this._share.parent}},{key:"storageId",get:function(){return this._share.storage_id}},{key:"storage",get:function(){return this._share.storage}},{key:"itemSource",get:function(){return this._share.item_source}},{key:"status",get:function(){return this._share.status}}])&&m(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),n}(),v={data:function(){return{SHARE_TYPES:g.D}}},_=r(74466),y=r.n(_),b=r(79440),S=r.n(b),w=r(15168),E=r.n(w),C={name:"SharingEntrySimple",components:{Actions:S()},directives:{Tooltip:E()},props:{title:{type:String,default:"",required:!0},tooltip:{type:String,default:""},subtitle:{type:String,default:""},isUnique:{type:Boolean,default:!0}}},k=r(93379),x=r.n(k),P=r(7795),R=r.n(P),O=r(90569),T=r.n(O),I=r(3565),D=r.n(I),N=r(19216),L=r.n(N),Y=r(44589),M=r.n(Y),H=r(35917),U={};U.styleTagTransform=M(),U.setAttributes=D(),U.insert=T().bind(null,"head"),U.domAPI=R(),U.insertStyleElement=L(),x()(H.Z,U),H.Z&&H.Z.locals&&H.Z.locals;var B=r(51900),j=(0,B.Z)(C,(function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("li",{staticClass:"sharing-entry"},[n._t("avatar"),n._v(" "),t("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:n.tooltip,expression:"tooltip"}],staticClass:"sharing-entry__desc"},[t("h5",[n._v(n._s(n.title))]),n._v(" "),n.subtitle?t("p",[n._v("\n\t\t\t"+n._s(n.subtitle)+"\n\t\t")]):n._e()]),n._v(" "),n.$slots.default?t("Actions",{staticClass:"sharing-entry__actions",attrs:{"menu-align":"right"}},[n._t("default")],2):n._e()],2)}),[],!1,null,"1436bf4a",null).exports;function $(n,e,t,r,i,a,s){try{var o=n[a](s),l=o.value}catch(n){return void t(n)}o.done?e(l):Promise.resolve(l).then(r,i)}var W={name:"SharingEntryInternal",components:{ActionLink:y(),SharingEntrySimple:j},props:{fileInfo:{type:Object,default:function(){},required:!0}},data:function(){return{copied:!1,copySuccess:!1}},computed:{internalLink:function(){return window.location.protocol+"//"+window.location.host+(0,c.generateUrl)("/f/")+this.fileInfo.id},clipboardTooltip:function(){return this.copied?this.copySuccess?t("files_sharing","Link copied"):t("files_sharing","Cannot copy, please copy the link manually"):t("files_sharing","Copy to clipboard")},internalLinkSubtitle:function(){return"dir"===this.fileInfo.type?t("files_sharing","Only works for users with access to this folder"):t("files_sharing","Only works for users with access to this file")}},methods:{copyLink:function(){var n,e=this;return(n=regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.$copyText(e.internalLink);case 3:e.$refs.copyButton.$el.focus(),e.copySuccess=!0,e.copied=!0,n.next=13;break;case 8:n.prev=8,n.t0=n.catch(0),e.copySuccess=!1,e.copied=!0,console.error(n.t0);case 13:return n.prev=13,setTimeout((function(){e.copySuccess=!1,e.copied=!1}),4e3),n.finish(13);case 16:case"end":return n.stop()}}),n,null,[[0,8,13,16]])})),function(){var e=this,t=arguments;return new Promise((function(r,i){var a=n.apply(e,t);function s(n){$(a,r,i,s,o,"next",n)}function o(n){$(a,r,i,s,o,"throw",n)}s(void 0)}))})()}}},F=W,Z=r(52475),q={};q.styleTagTransform=M(),q.setAttributes=D(),q.insert=T().bind(null,"head"),q.domAPI=R(),q.insertStyleElement=L(),x()(Z.Z,q),Z.Z&&Z.Z.locals&&Z.Z.locals;var V=(0,B.Z)(F,(function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("SharingEntrySimple",{staticClass:"sharing-entry__internal",attrs:{title:n.t("files_sharing","Internal link"),subtitle:n.internalLinkSubtitle},scopedSlots:n._u([{key:"avatar",fn:function(){return[t("div",{staticClass:"avatar-external icon-external-white"})]},proxy:!0}])},[n._v(" "),t("ActionLink",{ref:"copyButton",attrs:{href:n.internalLink,target:"_blank",icon:n.copied&&n.copySuccess?"icon-checkmark-color":"icon-clippy"},on:{click:function(e){return e.preventDefault(),n.copyLink.apply(null,arguments)}}},[n._v("\n\t\t"+n._s(n.clipboardTooltip)+"\n\t")])],1)}),[],!1,null,"854dc2c6",null),G=V.exports,K=r(22200),z=r(20296),Q=r.n(z),J=r(7811),X=r.n(J);function nn(n,e,t,r,i,a,s){try{var o=n[a](s),l=o.value}catch(n){return void t(n)}o.done?e(l):Promise.resolve(l).then(r,i)}function en(n){return function(){var e=this,t=arguments;return new Promise((function(r,i){var a=n.apply(e,t);function s(n){nn(a,r,i,s,o,"next",n)}function o(n){nn(a,r,i,s,o,"throw",n)}s(void 0)}))}}var tn=new f,rn="abcdefgijkmnopqrstwxyzABCDEFGHJKLMNPQRSTWXYZ23456789";function an(){return sn.apply(this,arguments)}function sn(){return(sn=en(regeneratorRuntime.mark((function n(){var e;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!tn.passwordPolicy.api||!tn.passwordPolicy.api.generate){n.next=12;break}return n.prev=1,n.next=4,d.default.get(tn.passwordPolicy.api.generate);case 4:if(!(e=n.sent).data.ocs.data.password){n.next=7;break}return n.abrupt("return",e.data.ocs.data.password);case 7:n.next=12;break;case 9:n.prev=9,n.t0=n.catch(1),console.info("Error generating password from password_policy",n.t0);case 12:return n.abrupt("return",Array(10).fill(0).reduce((function(n,e){return n+rn.charAt(Math.floor(Math.random()*rn.length))}),""));case 13:case"end":return n.stop()}}),n,null,[[1,9]])})))).apply(this,arguments)}function on(n,e,t,r,i,a,s){try{var o=n[a](s),l=o.value}catch(n){return void t(n)}o.done?e(l):Promise.resolve(l).then(r,i)}function ln(n){return function(){var e=this,t=arguments;return new Promise((function(r,i){var a=n.apply(e,t);function s(n){on(a,r,i,s,o,"next",n)}function o(n){on(a,r,i,s,o,"throw",n)}s(void 0)}))}}r(35449);var cn=(0,c.generateOcsUrl)("apps/files_sharing/api/v1/shares"),un={methods:{createShare:function(n){return ln(regeneratorRuntime.mark((function e(){var r,i,a,s,o,l,c,u,h,p,f,g,m,v,_,y,b,S,w;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.path,i=n.permissions,a=n.shareType,s=n.shareWith,o=n.publicUpload,l=n.password,c=n.sendPasswordByTalk,u=n.expireDate,h=n.label,p=n.hideDownload,f=n.note,g=n.attributes,e.prev=1,e.next=4,d.default.post(cn,{path:r,permissions:i,shareType:a,shareWith:s,publicUpload:o,password:l,sendPasswordByTalk:c,expireDate:u,label:h,hideDownload:p,note:f,attributes:g});case 4:if(null!=(v=e.sent)&&null!==(m=v.data)&&void 0!==m&&m.ocs){e.next=7;break}throw v;case 7:return e.abrupt("return",new A(v.data.ocs.data));case 10:throw e.prev=10,e.t0=e.catch(1),console.error("Error while creating share",e.t0),w=null===e.t0||void 0===e.t0||null===(_=e.t0.response)||void 0===_||null===(y=_.data)||void 0===y||null===(b=y.ocs)||void 0===b||null===(S=b.meta)||void 0===S?void 0:S.message,OC.Notification.showTemporary(w?t("files_sharing","Error creating the share: {errorMessage}",{errorMessage:w}):t("files_sharing","Error creating the share"),{type:"error"}),e.t0;case 16:case"end":return e.stop()}}),e,null,[[1,10]])})))()},deleteShare:function(n){return ln(regeneratorRuntime.mark((function e(){var r,i,a,s,o,l,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.default.delete(cn+"/".concat(n));case 3:if(null!=(i=e.sent)&&null!==(r=i.data)&&void 0!==r&&r.ocs){e.next=6;break}throw i;case 6:return e.abrupt("return",!0);case 9:throw e.prev=9,e.t0=e.catch(0),console.error("Error while deleting share",e.t0),c=null===e.t0||void 0===e.t0||null===(a=e.t0.response)||void 0===a||null===(s=a.data)||void 0===s||null===(o=s.ocs)||void 0===o||null===(l=o.meta)||void 0===l?void 0:l.message,OC.Notification.showTemporary(c?t("files_sharing","Error deleting the share: {errorMessage}",{errorMessage:c}):t("files_sharing","Error deleting the share"),{type:"error"}),e.t0;case 15:case"end":return e.stop()}}),e,null,[[0,9]])})))()},updateShare:function(n,e){return ln(regeneratorRuntime.mark((function r(){var i,a,s,o,l,c,u,h;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,d.default.put(cn+"/".concat(n),e);case 3:if(null!=(a=r.sent)&&null!==(i=a.data)&&void 0!==i&&i.ocs){r.next=8;break}throw a;case 8:return r.abrupt("return",a.data.ocs.data);case 9:r.next=17;break;case 11:throw r.prev=11,r.t0=r.catch(0),console.error("Error while updating share",r.t0),400!==r.t0.response.status&&(u=null===r.t0||void 0===r.t0||null===(s=r.t0.response)||void 0===s||null===(o=s.data)||void 0===o||null===(l=o.ocs)||void 0===l||null===(c=l.meta)||void 0===c?void 0:c.message,OC.Notification.showTemporary(u?t("files_sharing","Error updating the share: {errorMessage}",{errorMessage:u}):t("files_sharing","Error updating the share"),{type:"error"})),h=r.t0.response.data.ocs.meta.message,new Error(h);case 17:case"end":return r.stop()}}),r,null,[[0,11]])})))()}}};function hn(n){return hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},hn(n)}function dn(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function pn(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?dn(Object(t),!0).forEach((function(e){fn(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):dn(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function fn(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function gn(n,e,t,r,i,a,s){try{var o=n[a](s),l=o.value}catch(n){return void t(n)}o.done?e(l):Promise.resolve(l).then(r,i)}function mn(n){return function(){var e=this,t=arguments;return new Promise((function(r,i){var a=n.apply(e,t);function s(n){gn(a,r,i,s,o,"next",n)}function o(n){gn(a,r,i,s,o,"throw",n)}s(void 0)}))}}var An={name:"SharingInput",components:{Multiselect:X()},mixins:[v,un],props:{shares:{type:Array,default:function(){return[]},required:!0},linkShares:{type:Array,default:function(){return[]},required:!0},fileInfo:{type:Object,default:function(){},required:!0},reshare:{type:A,default:null},canReshare:{type:Boolean,required:!0}},data:function(){return{config:new f,loading:!1,query:"",recommendations:[],ShareSearch:OCA.Sharing.ShareSearch.state,suggestions:[]}},computed:{externalResults:function(){return this.ShareSearch.results},inputPlaceholder:function(){var n=this.config.isRemoteShareAllowed;return this.canReshare?n?t("files_sharing","Name, email, or Federated Cloud ID …"):t("files_sharing","Name or email …"):t("files_sharing","Resharing is not allowed")},isValidQuery:function(){return this.query&&""!==this.query.trim()&&this.query.length>this.config.minSearchStringLength},options:function(){return this.isValidQuery?this.suggestions:this.recommendations},noResultText:function(){return this.loading?t("files_sharing","Searching …"):t("files_sharing","No elements found.")}},mounted:function(){var n=this;this.getRecommendations(),this.$root.$on("getRecommendations",(function(e){n.getRecommendations()}))},methods:{onNewLinkShare:function(){var n=this;return mn(regeneratorRuntime.mark((function e(){var r,i,a,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.loading){e.next=2;break}return e.abrupt("return");case 2:if(r={share_type:OC.Share.SHARE_TYPE_LINK},n.config.isDefaultExpireDateEnforced&&(r.expiration=n.config.defaultExpirationDateString),!n.config.enableLinkPasswordByDefault){e.next=8;break}return e.next=7,an();case 7:r.password=e.sent;case 8:if(!n.config.enforcePasswordForPublicLink&&!n.config.isDefaultExpireDateEnforced){e.next=33;break}if(n.pending=!0,!n.share||n.share.id){e.next=20;break}if(!n.checkShare(n.share)){e.next=17;break}return e.next=14,n.pushNewLinkShare(n.share,!0);case 14:return e.abrupt("return",!0);case 17:return n.open=!0,OC.Notification.showTemporary(t("files_sharing","Error, please enter proper password and/or expiration date")),e.abrupt("return",!1);case 20:if(!n.config.enforcePasswordForPublicLink){e.next=24;break}return e.next=23,an();case 23:r.password=e.sent;case 24:return i=new A(r),e.next=27,new Promise((function(e){n.$emit("add:share",i,e)}));case 27:a=e.sent,n.open=!1,n.pending=!1,a.open=!0,e.next=36;break;case 33:return s=new A(r),e.next=36,n.pushNewLinkShare(s);case 36:case"end":return e.stop()}}),e)})))()},pushNewLinkShare:function(n,e){var t=this;return mn(regeneratorRuntime.mark((function r(){var i,a,s;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,!t.loading){r.next=3;break}return r.abrupt("return",!0);case 3:return t.errors={},i=(t.fileInfo.path+"/"+t.fileInfo.name).replace("//","/"),r.next=7,t.createShare({path:i,shareType:OC.Share.SHARE_TYPE_LINK,password:n.password,expireDate:n.expireDate});case 7:if(a=r.sent,t.open=!1,console.debug("Link share created",a),!e){r.next=16;break}return r.next=13,new Promise((function(n){t.$emit("update:share",a,n)}));case 13:s=r.sent,r.next=19;break;case 16:return r.next=18,new Promise((function(n){t.addShare(a,n)}));case 18:s=r.sent;case 19:t.config.enforcePasswordForPublicLink||s.copyLink(),r.next=25;break;case 22:r.prev=22,r.t0=r.catch(0),r.t0.response;case 25:return r.prev=25,t.loading=!1,r.finish(25);case 28:case"end":return r.stop()}}),r,null,[[0,22,25,28]])})))()},copyLink:function(){var n=this;return mn(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.$copyText(n.shareLink);case 3:n.$refs.copyButton.$el.focus(),n.copySuccess=!0,n.copied=!0,e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),n.copySuccess=!1,n.copied=!0,console.error(e.t0);case 13:return e.prev=13,setTimeout((function(){n.copySuccess=!1,n.copied=!1}),4e3),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[0,8,13,16]])})))()},addShare:function(n,e){this.linkShares.unshift(n),this.awaitForShare(n,e)},awaitForShare:function(n,e){var t=this;this.$nextTick((function(){var r=t.$children.find((function(e){return e.share===n}));r&&e(r)}))},asyncFind:function(n,e){var t=this;return mn(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.query=n.trim(),!t.isValidQuery){e.next=5;break}return t.loading=!0,e.next=5,t.debounceGetSuggestions(n);case 5:case"end":return e.stop()}}),e)})))()},getSuggestions:function(n){var e=arguments,r=this;return mn(regeneratorRuntime.mark((function i(){var a,s,o,l,u,h,p,f,g,m,A,v,_;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a=e.length>1&&void 0!==e[1]&&e[1],r.loading=!0,!0===OC.getCapabilities().files_sharing.sharee.query_lookup_default&&(a=!0),s=[r.SHARE_TYPES.SHARE_TYPE_USER,r.SHARE_TYPES.SHARE_TYPE_GROUP,r.SHARE_TYPES.SHARE_TYPE_REMOTE,r.SHARE_TYPES.SHARE_TYPE_REMOTE_GROUP,r.SHARE_TYPES.SHARE_TYPE_CIRCLE,r.SHARE_TYPES.SHARE_TYPE_ROOM,r.SHARE_TYPES.SHARE_TYPE_GUEST,r.SHARE_TYPES.SHARE_TYPE_DECK],!0===OC.getCapabilities().files_sharing.public.enabled&&s.push(r.SHARE_TYPES.SHARE_TYPE_EMAIL),o=null,i.prev=6,i.next=9,d.default.get((0,c.generateOcsUrl)("apps/files_sharing/api/v1/sharees"),{params:{format:"json",itemType:"dir"===r.fileInfo.type?"folder":"file",search:n,lookup:a,perPage:r.config.maxAutocompleteResults,shareType:s}});case 9:o=i.sent,i.next=16;break;case 12:return i.prev=12,i.t0=i.catch(6),console.error("Error fetching suggestions",i.t0),i.abrupt("return");case 16:l=o.data.ocs.data,u=o.data.ocs.data.exact,l.exact=[],h=Object.values(u).reduce((function(n,e){return n.concat(e)}),[]),p=Object.values(l).reduce((function(n,e){return n.concat(e)}),[]),f=r.filterOutExistingShares(h).map((function(n){return r.formatForMultiselect(n)})).sort((function(n,e){return n.shareType-e.shareType})),g=r.filterOutExistingShares(p).map((function(n){return r.formatForMultiselect(n)})).sort((function(n,e){return n.shareType-e.shareType})),m=[],l.lookupEnabled&&!a&&m.push({id:"global-lookup",isNoUser:!0,displayName:t("files_sharing","Search globally"),lookup:!0}),A=r.externalResults.filter((function(n){return!n.condition||n.condition(r)})),v=f.concat(g).concat(A).concat(m),_=v.reduce((function(n,e){return e.displayName?(n[e.displayName]||(n[e.displayName]=0),n[e.displayName]++,n):n}),{}),r.suggestions=v.map((function(n){return _[n.displayName]>1&&!n.desc?pn(pn({},n),{},{desc:n.shareWithDisplayNameUnique}):n})),r.loading=!1;case 30:case"end":return i.stop()}}),i,null,[[6,12]])})))()},debounceGetSuggestions:Q()((function(){this.getSuggestions.apply(this,arguments)}),300),getRecommendations:function(){var n=this;return mn(regeneratorRuntime.mark((function e(){var t,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loading=!0,t=null,e.prev=2,e.next=5,d.default.get((0,c.generateOcsUrl)("apps/files_sharing/api/v1/sharees_recommended"),{params:{format:"json",itemType:n.fileInfo.type}});case 5:t=e.sent,e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(2),console.error("Error fetching recommendations",e.t0),e.abrupt("return");case 12:r=n.externalResults.filter((function(e){return!e.condition||e.condition(n)})),i=Object.values(t.data.ocs.data.exact).reduce((function(n,e){return n.concat(e)}),[]),n.recommendations=n.filterOutExistingShares(i).map((function(e){return n.formatForMultiselect(e)})).concat(r),n.loading=!1;case 16:case"end":return e.stop()}}),e,null,[[2,8]])})))()},filterOutExistingShares:function(n){var e=this;return n.reduce((function(n,t){if("object"!==hn(t))return n;try{if(t.value.shareType===e.SHARE_TYPES.SHARE_TYPE_USER){if(t.value.shareWith===(0,K.getCurrentUser)().uid)return n;if(e.reshare&&t.value.shareWith===e.reshare.owner)return n}if(t.value.shareType===e.SHARE_TYPES.SHARE_TYPE_EMAIL){if(-1!==e.linkShares.map((function(n){return n.shareWith})).indexOf(t.value.shareWith.trim()))return n}else{var r=e.shares.reduce((function(n,e){return n[e.shareWith]=e.type,n}),{}),i=t.value.shareWith.trim();if(i in r&&r[i]===t.value.shareType)return n}n.push(t)}catch(e){return n}return n}),[])},shareTypeToIcon:function(n){switch(n){case this.SHARE_TYPES.SHARE_TYPE_GUEST:return"icon-user";case this.SHARE_TYPES.SHARE_TYPE_REMOTE_GROUP:case this.SHARE_TYPES.SHARE_TYPE_GROUP:return"icon-group";case this.SHARE_TYPES.SHARE_TYPE_EMAIL:return"icon-mail";case this.SHARE_TYPES.SHARE_TYPE_CIRCLE:return"icon-circle";case this.SHARE_TYPES.SHARE_TYPE_ROOM:return"icon-room";case this.SHARE_TYPES.SHARE_TYPE_DECK:return"icon-deck";default:return""}},formatForMultiselect:function(n){var e,r;if(n.value.shareType===this.SHARE_TYPES.SHARE_TYPE_USER&&this.config.shouldAlwaysShowUnique)e=null!==(r=n.shareWithDisplayNameUnique)&&void 0!==r?r:"";else if(n.value.shareType!==this.SHARE_TYPES.SHARE_TYPE_REMOTE&&n.value.shareType!==this.SHARE_TYPES.SHARE_TYPE_REMOTE_GROUP||!n.value.server)if(n.value.shareType===this.SHARE_TYPES.SHARE_TYPE_EMAIL)e=n.value.shareWith;else{var i;e=null!==(i=n.shareWithDescription)&&void 0!==i?i:""}else e=t("files_sharing","on {server}",{server:n.value.server});return{id:"".concat(n.value.shareType,"-").concat(n.value.shareWith),shareWith:n.value.shareWith,shareType:n.value.shareType,user:n.uuid||n.value.shareWith,isNoUser:n.value.shareType!==this.SHARE_TYPES.SHARE_TYPE_USER,displayName:n.name||n.label,subtitle:e,shareWithDisplayNameUnique:n.shareWithDisplayNameUnique||"",icon:this.shareTypeToIcon(n.value.shareType)}},showPermissions:function(n){var e=this;return mn(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.$store.commit("addOption",n),e.$store.commit("addFromInput",!0),(r=new A({})).permissions=OC.PERMISSION_READ,r.expireDate="",r.password="",e.$store.commit("addShare",r),e.$store.commit("addCurrentTab","permissions");case 8:case"end":return t.stop()}}),t)})))()}}},vn=An,_n=r(84721),yn={};yn.styleTagTransform=M(),yn.setAttributes=D(),yn.insert=T().bind(null,"head"),yn.domAPI=R(),yn.insertStyleElement=L(),x()(_n.Z,yn),_n.Z&&_n.Z.locals&&_n.Z.locals;var bn=(0,B.Z)(vn,(function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",[t("Multiselect",{ref:"multiselect",staticClass:"sharing-input",attrs:{"clear-on-select":!0,disabled:!n.canReshare,"hide-selected":!0,"internal-search":!1,loading:n.loading,options:n.options,placeholder:n.inputPlaceholder,"preselect-first":!0,"preserve-search":!0,searchable:!0,"user-select":!0,"open-direction":"below",label:"displayName","track-by":"id"},on:{"search-change":n.asyncFind,select:n.showPermissions},scopedSlots:n._u([{key:"noOptions",fn:function(){return[n._v("\n\t\t\t"+n._s(n.t("files_sharing","No recommendations. Start typing."))+"\n\t\t")]},proxy:!0},{key:"noResult",fn:function(){return[n._v("\n\t\t\t"+n._s(n.noResultText)+"\n\t\t")]},proxy:!0}])}),n._v(" "),n.canReshare?t("button",{staticClass:"add-new-link-btn",on:{click:function(e){return e.preventDefault(),e.stopPropagation(),n.onNewLinkShare.apply(null,arguments)}}},[n._v("\n\t\t"+n._s(n.t("files_sharing","Add link"))+"\n\t")]):n._e()],1)}),[],!1,null,null,null),Sn=bn.exports,wn=r(10949),En=r.n(wn),Cn=r(83779),kn=r.n(Cn),xn=r(88408),Pn=r.n(xn),Rn=r(25746);function On(n){return On="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},On(n)}function Tn(n,e,t,r,i,a,s){try{var o=n[a](s),l=o.value}catch(n){return void t(n)}o.done?e(l):Promise.resolve(l).then(r,i)}function In(n){return function(){var e=this,t=arguments;return new Promise((function(r,i){var a=n.apply(e,t);function s(n){Tn(a,r,i,s,o,"next",n)}function o(n){Tn(a,r,i,s,o,"throw",n)}s(void 0)}))}}var Dn={mixins:[un,v],props:{fileInfo:{type:Object,default:function(){},required:!0},share:{type:A,default:null},isUnique:{type:Boolean,default:!0}},data:function(){var n;return{config:new f,errors:{},loading:!1,saving:!1,open:!1,updateQueue:new Rn.Z({concurrency:1}),reactiveState:null===(n=this.share)||void 0===n?void 0:n.state,SHARE_TYPES:{SHARE_TYPE_USER:OC.Share.SHARE_TYPE_USER,SHARE_TYPE_GROUP:OC.Share.SHARE_TYPE_GROUP,SHARE_TYPE_LINK:OC.Share.SHARE_TYPE_LINK,SHARE_TYPE_EMAIL:OC.Share.SHARE_TYPE_EMAIL,SHARE_TYPE_REMOTE:OC.Share.SHARE_TYPE_REMOTE,SHARE_TYPE_CIRCLE:OC.Share.SHARE_TYPE_CIRCLE,SHARE_TYPE_GUEST:OC.Share.SHARE_TYPE_GUEST,SHARE_TYPE_REMOTE_GROUP:OC.Share.SHARE_TYPE_REMOTE_GROUP,SHARE_TYPE_ROOM:OC.Share.SHARE_TYPE_ROOM}}},computed:{hasNote:{get:function(){return""!==this.share.note},set:function(n){this.share.note=n?null:""}},dateTomorrow:function(){return moment().add(1,"days")},lang:function(){var n=window.dayNamesShort?window.dayNamesShort:["Sun.","Mon.","Tue.","Wed.","Thu.","Fri.","Sat."],e=window.monthNamesShort?window.monthNamesShort:["Jan.","Feb.","Mar.","Apr.","May.","Jun.","Jul.","Aug.","Sep.","Oct.","Nov.","Dec."];return{formatLocale:{firstDayOfWeek:window.firstDay?window.firstDay:0,monthsShort:e,weekdaysMin:n,weekdaysShort:n},monthFormat:"MMM"}},isShareOwner:function(){return this.share&&this.share.owner===(0,K.getCurrentUser)().uid}},methods:{checkShare:function(n){return(!n.password||"string"==typeof n.password&&""!==n.password.trim())&&!(n.expirationDate&&!moment(n.expirationDate).isValid())},onExpirationChange:function(n){var e=moment(n).format("YYYY-MM-DD");this.share.expireDate=e,this.queueUpdate("expireDate")},onExpirationDisable:function(){this.share.expireDate="",this.queueUpdate("expireDate")},onNoteChange:function(n){this.$set(this.share,"newNote",n.trim())},onNoteSubmit:function(){this.share.newNote&&(this.share.note=this.share.newNote,this.$delete(this.share,"newNote"),this.queueUpdate("note"))},onDelete:function(){var n=this;return In(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n.loading=!0,n.open=!1,e.next=5,n.deleteShare(n.share.id);case 5:console.debug("Share deleted",n.share.id),n.$emit("remove:share",n.share),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),n.open=!0;case 12:return e.prev=12,n.loading=!1,e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,9,12,15]])})))()},queueUpdate:function(){for(var n=this,e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(0!==t.length)if(this.share.id){var i={};t.forEach((function(e){"object"===On(n.share[e])?i[e]=JSON.stringify(n.share[e]):i[e]=n.share[e].toString()})),this.updateQueue.add(In(regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.saving=!0,n.errors={},e.prev=2,e.next=5,n.updateShare(n.share.id,i);case 5:r=e.sent,t.indexOf("password")>=0&&(n.$delete(n.share,"newPassword"),n.share.passwordExpirationTime=r.password_expiration_time),n.$delete(n.errors,t[0]),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),(a=e.t0.message)&&""!==a&&n.onSyncError(t[0],a);case 14:return e.prev=14,n.saving=!1,e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[2,10,14,17]])}))))}else console.error("Cannot update share.",this.share,"No valid id")},onSyncError:function(n,e){switch(this.open=!0,n){case"password":case"pending":case"expireDate":case"label":case"note":this.$set(this.errors,n,e);var t=this.$refs[n];if(t){t.$el&&(t=t.$el);var r=t.querySelector(".focusable");r&&r.focus()}break;case"sendPasswordByTalk":this.$set(this.errors,n,e),this.share.sendPasswordByTalk=!this.share.sendPasswordByTalk}},debounceQueueUpdate:Q()((function(n){this.queueUpdate(n)}),500),disabledDate:function(n){var e=moment(n);return this.dateTomorrow&&e.isBefore(this.dateTomorrow,"day")||this.dateMaxEnforced&&e.isSameOrAfter(this.dateMaxEnforced,"day")}}},Nn=r(20629),Ln={name:"ExternalShareAction",props:{id:{type:String,required:!0},action:{type:Object,default:function(){return{}}},fileInfo:{type:Object,default:function(){},required:!0},share:{type:A,default:null}},computed:{data:function(){return this.action.data(this)}}},Yn=(0,B.Z)(Ln,(function(){var n=this,e=n.$createElement;return(n._self._c||e)(n.data.is,n._g(n._b({tag:"Component"},"Component",n.data,!1),n.action.handlers),[n._v("\n\t"+n._s(n.data.text)+"\n")])}),[],!1,null,null,null).exports;function Mn(n,e,t,r,i,a,s){try{var o=n[a](s),l=o.value}catch(n){return void t(n)}o.done?e(l):Promise.resolve(l).then(r,i)}function Hn(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function Un(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?Hn(Object(t),!0).forEach((function(e){Bn(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Hn(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function Bn(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var jn={name:"SharingPermissions",components:{ActionRadio:En(),ActionCheckbox:kn(),ActionInput:Pn(),ExternalShareAction:Yn},directives:{Tooltip:E()},mixins:[Dn,v,un],data:function(){return{permissionsEdit:OC.PERMISSION_UPDATE,permissionsCreate:OC.PERMISSION_CREATE,permissionsDelete:OC.PERMISSION_DELETE,permissionsRead:OC.PERMISSION_READ,permissionsShare:OC.PERMISSION_SHARE,publicUploadRWValue:OC.PERMISSION_UPDATE|OC.PERMISSION_CREATE|OC.PERMISSION_READ|OC.PERMISSION_DELETE,publicUploadRValue:OC.PERMISSION_READ,publicUploadWValue:OC.PERMISSION_CREATE,publicUploadEValue:OC.PERMISSION_UPDATE|OC.PERMISSION_READ,show:!0,showAdLink:!0,sendPasswordByTalk:null,hideDownload:null,isAllowed:!0,allowExtensions:["application/vnd.oasis.opendocument.graphics","application/vnd.oasis.opendocument.text","text/markdown","text/plain","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.openxmlformats-officedocument.presentationml.presentation"],shareLabel:this.share.newLabel||this.share.label||"",ExternalShareActions:OCA.Sharing.ExternalShareActions.state}},beforeMount:function(){console.log("file extension : "+this.fileInfo.mimetype),this.allowExtensions.includes(this.fileInfo.mimetype)&&(this.isAllowed=!1),console.log("file type : "+this.isAllowed)},computed:Un(Un({},(0,Nn.Se)({fromInput:"getFromInput",optionValues:"getOption"})),{},{sharePermissions:function(){return this.share.permissions&~OC.PERMISSION_SHARE},randomId:function(){return Math.random().toString(27).substr(2)},canHaveExpirationDate:function(){return!this.isRemoteShare},canSetReshare:function(){return this.fileInfo.sharePermissions&OC.PERMISSION_SHARE||this.canReshare},canReshare:{get:function(){return this.share.hasSharePermission},set:function(n){this.updatePermissions({isReshareChecked:n,otherPermissions:this.sharePermissions})}},hasUnsavedPassword:function(){return void 0!==this.share.newPassword},isFolder:function(){return"dir"===this.fileInfo.type},hasExpirationDate:{get:function(){return this.config.isDefaultInternalExpireDateEnforced||!!this.share.expireDate},set:function(n){this.share.expireDate=n?""!==this.config.defaultInternalExpirationDateString?this.config.defaultInternalExpirationDateString:" ":""}},isPasswordProtected:{get:function(){return this.config.enforcePasswordForPublicLink||!!this.share.password},set:function(n){var e,t=this;return(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.default,e.t1=t.share,!n){e.next=8;break}return e.next=5,an();case 5:e.t2=e.sent,e.next=9;break;case 8:e.t2="";case 9:e.t3=e.t2,e.t0.set.call(e.t0,e.t1,"password",e.t3),i.default.set(t.share,"newPassword",t.share.password);case 12:case"end":return e.stop()}}),e)})),function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function s(n){Mn(a,r,i,s,o,"next",n)}function o(n){Mn(a,r,i,s,o,"throw",n)}s(void 0)}))})()}},fileHasCreatePermission:function(){return!!(this.fileInfo.permissions&OC.PERMISSION_CREATE)},isExteranlShare:function(){return this.fromInput?Boolean(this.SHARE_TYPES.SHARE_TYPE_EMAIL===this.optionValues.shareType||this.SHARE_TYPES.SHARE_TYPE_LINK===this.optionValues.shareType):Boolean(this.SHARE_TYPES.SHARE_TYPE_EMAIL===this.share.type||this.SHARE_TYPES.SHARE_TYPE_LINK===this.share.type)},externalLinkActions:function(){return this.ExternalShareActions.actions.filter((function(n){return n.shareType.includes(OC.Share.SHARE_TYPE_LINK)}))},isLinkShare:function(){return this.SHARE_TYPES.SHARE_TYPE_LINK===this.share.type},shareLabelPlaceholder:function(){return t("files_sharing","Share label")}}),methods:{onPasswordChange:function(n){console.debug("new password",n),this.$set(this.share,"newPassword",n)},onPasswordDisable:function(){this.share.password="",this.$delete(this.share,"newPassword")},addPasswordProtectedByTalkChange:function(n){this.share.sendPasswordByTalk=n.target.checked},addHideDownload:function(n){this.share.hideDownload=n.target.checked},addExpirationDate:function(n){var e=moment(n).format("YYYY-MM-DD");this.share.expireDate=e},updatePermissions:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=n.isReshareChecked,t=void 0===e?this.canReshare:e,r=n.otherPermissions,i=void 0===r?0:r,a=0|i|(t?this.permissionsShare:0);this.share.permissions=a},addPermissions:function(n){var e=0;this.isExteranlShare?((e=parseInt(n.target.value,10))===OC.PERMISSION_CREATE&&(this.share.hideDownload=!1),this.share.permissions=e):(e=parseInt(n.target.value,10)|(this.canReshare?this.permissionsShare:0),this.share.permissions=e)},cancelSharing:function(){this.$store.commit("addCurrentTab","default")},nextSharing:function(){console.debug("next sharing",this.share),this.$store.commit("addShare",this.share),this.$store.commit("addCurrentTab","notes")},confirmSharing:function(){this.loading=!0,this.share.label=this.shareLabel.trim(),this.share.sendPasswordByTalk&&(this.sendPasswordByTalk=this.share.sendPasswordByTalk.toString()),this.share.hideDownload?this.hideDownload=this.share.hideDownload.toString():this.hideDownload="false",void 0!==this.share.newPassword&&(this.share.password=this.share.newPassword.trim()),this.updateShare(this.share.id,{permissions:this.share.permissions,hideDownload:this.hideDownload,password:this.share.password,expireDate:this.share.expireDate,label:this.share.label,sendPasswordByTalk:this.sendPasswordByTalk}),this.loading=!0,this.$store.commit("addCurrentTab","default")},isPasswordProtectedByTalkAvailable:function(){return this.isPasswordProtected&&this.isTalkEnabled},canTogglePasswordProtectedByTalkAvailable:function(){return!(!this.isPasswordProtected||this.isEmailShareType&&!this.hasUnsavedPassword)}}},$n=jn,Wn=r(60486),Fn={};Fn.styleTagTransform=M(),Fn.setAttributes=D(),Fn.insert=T().bind(null,"head"),Fn.domAPI=R(),Fn.insertStyleElement=L(),x()(Wn.Z,Fn),Wn.Z&&Wn.Z.locals&&Wn.Z.locals;var Zn=(0,B.Z)($n,(function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("ul",{staticClass:"sharing-permissions"},[n.isExteranlShare?[t("label",{staticClass:"permissions"},[n._v("\n\t\t\t"+n._s(n.t("files_sharing","Permissions"))+"\n\t\t")]),n._v(" "),n.isFolder&&n.fileHasCreatePermission&&n.config.isPublicUploadEnabled?[t("ActionRadio",{attrs:{checked:n.sharePermissions===n.publicUploadRValue,value:n.publicUploadRValue,name:n.randomId,disabled:n.saving},on:{change:n.addPermissions}},[n._v("\n\t\t\t\t"+n._s(n.t("files_sharing","Read only"))+"\n\t\t\t")]),n._v(" "),t("ActionRadio",{attrs:{checked:n.sharePermissions===n.publicUploadRWValue,value:n.publicUploadRWValue,disabled:n.saving,name:n.randomId},on:{change:n.addPermissions}},[n._v("\n\t\t\t\t"+n._s(n.t("files_sharing","Read, write and upload"))+"\n\t\t\t")]),n._v(" "),t("ActionRadio",{staticClass:"sharing-entry__action--public-upload",attrs:{checked:n.sharePermissions===n.publicUploadWValue,value:n.publicUploadWValue,disabled:n.saving,name:n.randomId},on:{change:n.addPermissions}},[n._v("\n\t\t\t\t"+n._s(n.t("files_sharing","File drop (upload only)"))+"\n\t\t\t")]),n._v(" "),t("div",{staticClass:"filedrop-message"},[n._v("\n\t\t\t\t"+n._s(n.t("files_sharing","With File drop, only uploading is allowed. Only you can see files and folders that have been uploaded."))+"\n\t\t\t")])]:[t("ActionRadio",{attrs:{checked:n.sharePermissions===n.publicUploadRValue,value:n.publicUploadRValue,name:n.randomId,disabled:n.isAllowed},on:{change:n.addPermissions}},[n._v("\n\t\t\t\t"+n._s(n.t("files_sharing","Read only"))+"\n\t\t\t")]),n._v(" "),t("div",{staticClass:"readonly-message"},[n._v("\n\t\t\t\t"+n._s(n.t("files_sharing","There are no editing functions for files shared with non-MagentaCLOUD users."))+"\n\t\t\t")]),n._v(" "),t("ActionRadio",{attrs:{checked:n.sharePermissions===n.publicUploadEValue,value:n.publicUploadEValue,disabled:n.isAllowed,name:n.randomId},on:{change:n.addPermissions}},[n._v("\n\t\t\t\t"+n._s(n.t("files_sharing","Read and write"))+"\n\t\t\t")])],n._v(" "),t("div",{staticClass:"advanced-settings"},[t("label",{on:{click:function(e){n.showAdLink=!n.showAdLink}}},[n._v("\n\t\t\t\t"+n._s(n.t("files_sharing","Advanced"))),t("span",{class:["sort-indicator",{"icon-triangle-s":n.showAdLink},{"icon-triangle-n":!n.showAdLink}]})]),n._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:n.showAdLink,expression:"showAdLink"}]},[n.isLinkShare?t("input",{directives:[{name:"model",rawName:"v-model",value:n.shareLabel,expression:"shareLabel"}],ref:"label",class:{error:n.errors.label},attrs:{placeholder:n.shareLabelPlaceholder,disabled:n.saving},domProps:{value:n.shareLabel},on:{input:function(e){e.target.composing||(n.shareLabel=e.target.value)}}}):n._e(),n._v(" "),t("ActionCheckbox",{attrs:{checked:n.share.hideDownload,disabled:n.saving||n.sharePermissions===n.publicUploadWValue},on:{"update:checked":function(e){return n.$set(n.share,"hideDownload",e)},change:n.addHideDownload}},[n._v("\n\t\t\t\t\t"+n._s(n.t("files_sharing","Hide download"))+"\n\t\t\t\t")]),n._v(" "),t("ActionCheckbox",{staticClass:"share-link-password-checkbox",attrs:{checked:n.isPasswordProtected,disabled:n.config.enforcePasswordForPublicLink||n.saving},on:{"update:checked":function(e){n.isPasswordProtected=e},uncheck:n.onPasswordDisable}},[n._v("\n\t\t\t\t\t"+n._s(n.config.enforcePasswordForPublicLink?n.t("files_sharing","Password protection (enforced)"):n.t("files_sharing","Password protect"))+"\n\t\t\t\t")]),n._v(" "),n.isPasswordProtected?t("ActionInput",{ref:"password",attrs:{icon:"",disabled:n.saving,required:n.config.enforcePasswordForPublicLink,value:n.hasUnsavedPassword?n.share.newPassword:"***************",autocomplete:"new-password",type:n.hasUnsavedPassword?"text":"password"},on:{"update:value":n.onPasswordChange}},[n._v("\n\t\t\t\t\t"+n._s(n.t("files_sharing","Enter a password"))+"\n\t\t\t\t")]):n._e(),n._v(" "),n.isPasswordProtected?t("div",{staticClass:"password-message"},[n._v("\n\t\t\t\t\t"+n._s(n.t("files_sharing","The password is not sent with the email to maintain confidentiality."))+"\n\t\t\t\t")]):n._e(),n._v(" "),n.isPasswordProtectedByTalkAvailable?t("ActionCheckbox",{staticClass:"share-link-password-talk-checkbox",attrs:{checked:n.share.sendPasswordByTalk,disabled:!n.canTogglePasswordProtectedByTalkAvailable||n.saving},on:{"update:checked":function(e){return n.$set(n.share,"sendPasswordByTalk",e)},change:n.addPasswordProtectedByTalkChange}},[n._v("\n\t\t\t\t\t"+n._s(n.t("files_sharing","Video verification"))+"\n\t\t\t\t")]):n._e(),n._v(" "),n.canHaveExpirationDate?t("ActionCheckbox",{attrs:{checked:n.hasExpirationDate},on:{"update:checked":function(e){n.hasExpirationDate=e}}},[n._v("\n\t\t\t\t\t"+n._s(n.config.isDefaultInternalExpireDateEnforced?n.t("files_sharing","Expiration date enforced"):n.t("files_sharing","Set expiration date"))+"\n\t\t\t\t")]):n._e(),n._v(" "),n.hasExpirationDate?t("ActionInput",{ref:"expireDate",attrs:{disabled:n.saving,lang:n.lang,value:n.share.expireDate||this.config.defaultInternalExpirationDateString,"value-type":"format",icon:"icon-calendar-dark",type:"date"},on:{"update:value":n.addExpirationDate}},[n._v("\n\t\t\t\t\t"+n._s(n.t("files_sharing","Enter a date"))+"\n\t\t\t\t")]):n._e(),n._v(" "),n.isLinkShare&&!n.isFolder?t("div",n._l(n.externalLinkActions,(function(e){return t("ExternalShareAction",{key:e.id,attrs:{id:e.id,action:e,"file-info":n.fileInfo,share:n.share}})})),1):n._e()],1)])]:[t("label",{staticClass:"permissions"},[n._v("\n\t\t\t"+n._s(n.t("files_sharing","Permissions"))+"\n\t\t")]),n._v(" "),n.isFolder&&n.config.isPublicUploadEnabled?[t("ActionRadio",{attrs:{checked:n.sharePermissions===n.publicUploadRValue,value:n.publicUploadRValue,name:n.randomId,disabled:n.saving},on:{change:n.addPermissions}},[n._v("\n\t\t\t\t"+n._s(n.t("files_sharing","Read only"))+"\n\t\t\t")]),n._v(" "),t("ActionRadio",{attrs:{checked:n.sharePermissions===n.publicUploadRWValue,value:n.publicUploadRWValue,disabled:n.saving,name:n.randomId},on:{change:n.addPermissions}},[n._v("\n\t\t\t\t"+n._s(n.t("files_sharing","Read, write and upload"))+"\n\t\t\t")])]:[t("ActionRadio",{attrs:{checked:n.sharePermissions===n.publicUploadRValue,value:n.publicUploadRValue,name:n.randomId,disabled:n.saving},on:{change:n.addPermissions}},[n._v("\n\t\t\t\t"+n._s(n.t("files_sharing","Read only"))+"\n\t\t\t")]),n._v(" "),t("ActionRadio",{attrs:{checked:n.sharePermissions===n.publicUploadEValue,value:n.publicUploadEValue,disabled:n.saving,name:n.randomId},on:{change:n.addPermissions}},[n._v("\n\t\t\t\t"+n._s(n.t("files_sharing","Read and write"))+"\n\t\t\t")])],n._v(" "),t("div",{staticClass:"advanced-settings"},[t("label",{on:{click:function(e){n.show=!n.show}}},[n._v("\n\t\t\t\t"+n._s(n.t("files_sharing","Advanced"))),t("span",{class:["sort-indicator",{"icon-triangle-s":n.showAdLink},{"icon-triangle-n":!n.showAdLink}]})]),n._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:n.show,expression:"show"}]},[n.config.isResharingAllowed?t("ActionCheckbox",{ref:"canReshare",attrs:{checked:n.canReshare,value:n.permissionsShare,disabled:n.saving||!n.canSetReshare},on:{"update:checked":function(e){n.canReshare=e}}},[n._v("\n\t\t\t\t\t"+n._s(n.t("files_sharing","Allow resharing"))+"\n\t\t\t\t")]):n._e(),n._v(" "),n.canHaveExpirationDate?t("ActionCheckbox",{attrs:{checked:n.hasExpirationDate},on:{"update:checked":function(e){n.hasExpirationDate=e}}},[n._v("\n\t\t\t\t\t"+n._s(n.config.isDefaultInternalExpireDateEnforced?n.t("files_sharing","Expiration date enforced"):n.t("files_sharing","Set expiration date"))+"\n\t\t\t\t")]):n._e(),n._v(" "),n.hasExpirationDate?t("ActionInput",{ref:"expireDate",attrs:{disabled:n.saving,"first-day-of-week":n.firstDay,lang:n.lang,value:n.share.expireDate||this.config.defaultInternalExpirationDateString,"value-type":"format",icon:"icon-calendar-dark",type:"date"},on:{"update:value":n.addExpirationDate}},[n._v("\n\t\t\t\t\t"+n._s(n.t("files_sharing","Enter a date"))+"\n\t\t\t\t")]):n._e()],1)])],n._v(" "),t("button",{staticClass:"status-buttons__select",attrs:{name:n.randomId,disabled:n.saving},on:{click:n.cancelSharing}},[n._v("\n\t\t"+n._s(n.t("files_sharing","Cancel"))+"\n\t")]),n._v(" "),n.share.id>0?[t("button",{staticClass:"status-buttons__primary primary",attrs:{name:n.randomId,disabled:n.saving},on:{click:n.confirmSharing}},[n._v("\n\t\t\t"+n._s(n.t("files_sharing","Confirm"))+"\n\t\t")])]:[t("button",{staticClass:"status-buttons__primary primary",attrs:{name:n.randomId,disabled:n.saving},on:{click:n.nextSharing}},[n._v("\n\t\t\t"+n._s(n.t("files_sharing","Next"))+"\n\t\t")])]],2)}),[],!1,null,null,null).exports;function qn(n,e,t,r,i,a,s){try{var o=n[a](s),l=o.value}catch(n){return void t(n)}o.done?e(l):Promise.resolve(l).then(r,i)}function Vn(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function Gn(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?Vn(Object(t),!0).forEach((function(e){Kn(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Vn(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function Kn(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var zn={name:"SharingNotes",components:{},directives:{},mixins:[Dn,un,v],data:function(){return{config:new f,loading:!1,query:"",recommendations:[],ShareSearch:OCA.Sharing.ShareSearch.state,suggestions:[],shareNote:this.share.newNote||this.share.note||"",sendPasswordByTalk:null,hideDownload:null}},computed:Gn(Gn({},(0,Nn.Se)({optionValues:"getOption"})),{},{randomId:function(){return Math.random().toString(27).substr(2)},notePlaceholder:function(){return t("files_sharing","Your message")}}),methods:{cancelSharing:function(){this.$store.commit("addCurrentTab","default")},sendEmail:function(){this.loading=!0,this.share.newNote=this.shareNote,this.onNoteSubmit(),this.loading=!1,this.$store.commit("addCurrentTab","default")},addShare:function(){var n,e=this;return(n=regeneratorRuntime.mark((function n(){var t,r,i,a,s;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.share.handler){n.next=7;break}return console.debug("addShare this.share handler ",e.share),n.next=4,e.share.handler(e);case 4:return t=n.sent,e.$emit("add:share",new A(t)),n.abrupt("return",!0);case 7:return e.loading=!0,console.debug("Adding a new share from the input for",e.share),n.prev=9,s=(e.fileInfo.path+"/"+e.fileInfo.name).replace("//","/"),e.share.sendPasswordByTalk&&(e.sendPasswordByTalk=e.share.sendPasswordByTalk.toString()),e.share.hideDownload&&(e.hideDownload=e.share.hideDownload.toString()),void 0!==e.share.newPassword&&(e.share.password=e.share.newPassword.trim()),n.next=16,e.createShare({path:s,shareType:e.optionValues.shareType,shareWith:e.optionValues.shareWith,password:e.share.password,sendPasswordByTalk:e.sendPasswordByTalk,expireDate:e.share.expireDate,hideDownload:e.hideDownload,note:e.shareNote,permissions:e.fileInfo.sharePermissions&OC.getCapabilities().files_sharing.default_permissions&e.share.permissions});case 16:return null!==(r=e.$refs.multiselect)&&void 0!==r&&null!==(i=r.$refs)&&void 0!==i&&null!==(a=i.VueMultiselect)&&void 0!==a&&a.search&&(e.$refs.multiselect.$refs.VueMultiselect.search=""),e.$root.$emit("update",e.fileInfo),n.next=20,e.$root.$emit("getRecommendations");case 20:e.cancelSharing(),n.next=27;break;case 23:n.prev=23,n.t0=n.catch(9),e.query=e.share.shareWith,console.error("Error while adding new share",n.t0);case 27:return n.prev=27,e.loading=!1,n.finish(27);case 30:case"end":return n.stop()}}),n,null,[[9,23,27,30]])})),function(){var e=this,t=arguments;return new Promise((function(r,i){var a=n.apply(e,t);function s(n){qn(a,r,i,s,o,"next",n)}function o(n){qn(a,r,i,s,o,"throw",n)}s(void 0)}))})()}}},Qn=zn,Jn=r(59569),Xn={};Xn.styleTagTransform=M(),Xn.setAttributes=D(),Xn.insert=T().bind(null,"head"),Xn.domAPI=R(),Xn.insertStyleElement=L(),x()(Jn.Z,Xn),Jn.Z&&Jn.Z.locals&&Jn.Z.locals;var ne=(0,B.Z)(Qn,(function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{class:{"icon-loading":n.loading}},[t("div",{staticClass:"sharing-notes"},[[t("label",{staticClass:"note-title"},[n._v("\n\t\t\t\t"+n._s(n.t("files_sharing","Your Message"))+"\n\t\t\t")]),n._v(" "),t("p",{staticClass:"note-subtitle"},[n._v("\n\t\t\t\t"+n._s(n.t("files_sharing","You can attach a message to the share."))+"\n\t\t\t")]),n._v(" "),t("div",[t("textarea",{directives:[{name:"model",rawName:"v-model",value:n.shareNote,expression:"shareNote"}],ref:"note",staticClass:"sharing-note",attrs:{placeholder:n.notePlaceholder,disabled:n.saving},domProps:{value:n.shareNote},on:{input:function(e){e.target.composing||(n.shareNote=e.target.value)}}})]),n._v(" "),t("div",[t("button",{staticClass:"status-buttons__select",attrs:{name:n.randomId,disabled:n.saving},on:{click:n.cancelSharing}},[n._v("\n\t\t\t\t\t"+n._s(n.t("files_sharing","Cancel"))+"\n\t\t\t\t")]),n._v(" "),n.share.id>0?[t("button",{staticClass:"status-buttons__primary primary",attrs:{name:n.randomId,disabled:n.saving},on:{click:n.sendEmail}},[n._v("\n\t\t\t\t\t\t"+n._s(n.t("files_sharing","Send email"))+"\n\t\t\t\t\t")])]:[t("button",{staticClass:"status-buttons__primary primary",attrs:{name:n.randomId,disabled:n.saving},on:{click:n.addShare}},[n._v("\n\t\t\t\t\t\t"+n._s(n.t("files_sharing","Send share"))+"\n\t\t\t\t\t")])]],2)]],2)])}),[],!1,null,"ac0277b2",null).exports,ee=r(56286),te=r.n(ee),re=r(76632),ie=r(41009),ae=r.n(ie),se={name:"SharingEntryInherited",components:{ActionButton:te(),ActionLink:y(),ActionText:ae(),Avatar:h(),SharingEntrySimple:j},mixins:[Dn],props:{share:{type:A,required:!0}},computed:{viaFileTargetUrl:function(){return(0,c.generateUrl)("/f/{fileid}",{fileid:this.share.viaFileid})},viaFolderName:function(){return(0,re.EZ)(this.share.viaPath)}}},oe=r(71296),le={};le.styleTagTransform=M(),le.setAttributes=D(),le.insert=T().bind(null,"head"),le.domAPI=R(),le.insertStyleElement=L(),x()(oe.Z,le),oe.Z&&oe.Z.locals&&oe.Z.locals;var ce=(0,B.Z)(se,(function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("SharingEntrySimple",{key:n.share.id,staticClass:"sharing-entry__inherited",attrs:{title:n.share.shareWithDisplayName},scopedSlots:n._u([{key:"avatar",fn:function(){return[t("Avatar",{staticClass:"sharing-entry__avatar",attrs:{user:n.share.shareWith,"display-name":n.share.shareWithDisplayName,"tooltip-message":""}})]},proxy:!0}])},[n._v(" "),t("ActionText",{attrs:{icon:"icon-user"}},[n._v("\n\t\t"+n._s(n.t("files_sharing","Added by {initiator}",{initiator:n.share.ownerDisplayName}))+"\n\t")]),n._v(" "),n.share.viaPath&&n.share.viaFileid?t("ActionLink",{attrs:{icon:"icon-folder",href:n.viaFileTargetUrl}},[n._v("\n\t\t"+n._s(n.t("files_sharing","Via “{folder}”",{folder:n.viaFolderName}))+"\n\t")]):n._e(),n._v(" "),n.share.canDelete?t("ActionButton",{attrs:{icon:"icon-close"},on:{click:function(e){return e.preventDefault(),n.onDelete.apply(null,arguments)}}},[n._v("\n\t\t"+n._s(n.t("files_sharing","Unshare"))+"\n\t")]):n._e()],1)}),[],!1,null,"29845767",null),ue=ce.exports;function he(n,e,t,r,i,a,s){try{var o=n[a](s),l=o.value}catch(n){return void t(n)}o.done?e(l):Promise.resolve(l).then(r,i)}var de={name:"SharingInherited",components:{ActionButton:te(),SharingEntryInherited:ue,SharingEntrySimple:j},props:{fileInfo:{type:Object,default:function(){},required:!0}},data:function(){return{loaded:!1,loading:!1,showInheritedShares:!1,shares:[]}},computed:{showInheritedSharesIcon:function(){return this.loading?"icon-loading-small":this.showInheritedShares?"icon-triangle-n":"icon-triangle-s"},mainTitle:function(){return t("files_sharing","Others with access")},subTitle:function(){return this.showInheritedShares&&0===this.shares.length?t("files_sharing","No other users with access found"):""},toggleTooltip:function(){return"dir"===this.fileInfo.type?t("files_sharing","Toggle list of others with access to this directory"):t("files_sharing","Toggle list of others with access to this file")},fullPath:function(){return"".concat(this.fileInfo.path,"/").concat(this.fileInfo.name).replace("//","/")}},watch:{fileInfo:function(){this.resetState()}},methods:{toggleInheritedShares:function(){this.showInheritedShares=!this.showInheritedShares,this.showInheritedShares?this.fetchInheritedShares():this.resetState()},fetchInheritedShares:function(){var n,e=this;return(n=regeneratorRuntime.mark((function n(){var r,i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.loading=!0,n.prev=1,r=(0,c.generateOcsUrl)("apps/files_sharing/api/v1/shares/inherited?format=json&path={path}",{path:e.fullPath}),n.next=5,d.default.get(r);case 5:i=n.sent,e.shares=i.data.ocs.data.map((function(n){return new A(n)})).sort((function(n,e){return e.createdTime-n.createdTime})),console.info(e.shares),e.loaded=!0,n.next=14;break;case 11:n.prev=11,n.t0=n.catch(1),OC.Notification.showTemporary(t("files_sharing","Unable to fetch inherited shares"),{type:"error"});case 14:return n.prev=14,e.loading=!1,n.finish(14);case 17:case"end":return n.stop()}}),n,null,[[1,11,14,17]])})),function(){var e=this,t=arguments;return new Promise((function(r,i){var a=n.apply(e,t);function s(n){he(a,r,i,s,o,"next",n)}function o(n){he(a,r,i,s,o,"throw",n)}s(void 0)}))})()},resetState:function(){this.loaded=!1,this.loading=!1,this.showInheritedShares=!1,this.shares=[]}}},pe=de,fe=r(93591),ge={};ge.styleTagTransform=M(),ge.setAttributes=D(),ge.insert=T().bind(null,"head"),ge.domAPI=R(),ge.insertStyleElement=L(),x()(fe.Z,ge),fe.Z&&fe.Z.locals&&fe.Z.locals;var me=(0,B.Z)(pe,(function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("ul",{attrs:{id:"sharing-inherited-shares"}},[t("SharingEntrySimple",{staticClass:"sharing-entry__inherited",attrs:{title:n.mainTitle,subtitle:n.subTitle},scopedSlots:n._u([{key:"avatar",fn:function(){return[t("div",{staticClass:"avatar-shared icon-more-white"})]},proxy:!0}])},[n._v(" "),t("ActionButton",{attrs:{icon:n.showInheritedSharesIcon},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),n.toggleInheritedShares.apply(null,arguments)}}},[n._v("\n\t\t\t"+n._s(n.toggleTooltip)+"\n\t\t")])],1),n._v(" "),n._l(n.shares,(function(e){return t("SharingEntryInherited",{key:e.id,attrs:{"file-info":n.fileInfo,share:e}})}))],2)}),[],!1,null,"49ffd834",null),Ae=me.exports,ve={props:{options:{type:Object,required:!0},default:{type:Number,required:!1,default:0},tabindex:{type:Number,required:!1,default:0},title:{type:String,required:!1,default:null},isDisable:{type:Boolean,default:!1}},data:function(){return{selected:this.getDefault(this.default),open:!1}},mounted:function(){this.$emit("input",this.selected)},methods:{setCurrentSelectedOption:function(n){console.info("in setCurrentSelectedOption-",n),this.$emit("setSelectedOption",n)},getDefault:function(n){var e=null;if(n)for(var t=0;t<Object.keys(this.options).length;t++)this.options[t].key===n&&(e=this.options[t]);else Object.keys(this.options).length>0&&(e=this.options[0]);return e}}},_e=r(46788),ye={};ye.styleTagTransform=M(),ye.setAttributes=D(),ye.insert=T().bind(null,"head"),ye.domAPI=R(),ye.insertStyleElement=L(),x()(_e.Z,ye),_e.Z&&_e.Z.locals&&_e.Z.locals;var be=(0,B.Z)(ve,(function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{staticClass:"custom-select",attrs:{tabindex:n.tabindex},on:{blur:function(e){n.open=!1}}},[t("div",{class:n.isDisable?"disabledRow":null,on:{click:function(e){n.open=n.isDisable?n.open:!n.open}}},[t("h5",[n._v(n._s(n.title))]),n._v(" "),t("div",{staticClass:"selected",class:{open:n.open}},[n._v("\n\t\t\t"+n._s(n.selected.value)+"\n\t\t\t"),t("span",{staticClass:"sort-indicator icon-triangle-s"})])]),n._v(" "),t("div",{staticClass:"items",class:{selectHide:!n.open}},n._l(n.options,(function(e,r){return t("div",{key:r,class:e.key==n.selected.key?"selectedItem":null,on:{click:function(t){n.selected=e,n.open=!1,n.$emit("input",e.key),n.setCurrentSelectedOption(e.key)}}},[t("span",{staticClass:"icon-select-check"}),n._v("\n\t\t\t"+n._s(e.value)+"\n\t\t")])})),0)])}),[],!1,null,"6673cd0e",null).exports;function Se(n){return Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Se(n)}function we(n,e,t,r,i,a,s){try{var o=n[a](s),l=o.value}catch(n){return void t(n)}o.done?e(l):Promise.resolve(l).then(r,i)}function Ee(n){return function(){var e=this,t=arguments;return new Promise((function(r,i){var a=n.apply(e,t);function s(n){we(a,r,i,s,o,"next",n)}function o(n){we(a,r,i,s,o,"throw",n)}s(void 0)}))}}var Ce={name:"SharingEntryLink",components:{Actions:S(),ActionButton:te(),ActionCheckbox:kn(),ActionInput:Pn(),ActionLink:y(),ActionText:ae(),Avatar:h(),CustomSelect:be},directives:{Tooltip:E()},mixins:[Dn],props:{canReshare:{type:Boolean,default:!0}},data:function(){return{copySuccess:!0,copied:!1,pending:!1,publicUploadRWValue:OC.PERMISSION_UPDATE|OC.PERMISSION_CREATE|OC.PERMISSION_READ|OC.PERMISSION_DELETE,publicUploadRValue:OC.PERMISSION_READ,publicUploadWValue:OC.PERMISSION_CREATE,publicUploadEValue:OC.PERMISSION_UPDATE|OC.PERMISSION_READ,isAllowed:!0,allowExtensions:["application/vnd.oasis.opendocument.graphics","application/vnd.oasis.opendocument.text","text/markdown","text/plain","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.openxmlformats-officedocument.presentationml.presentation"],ExternalLinkActions:OCA.Sharing.ExternalLinkActions.state}},beforeMount:function(){console.log("file extension : "+this.fileInfo.mimetype),this.allowExtensions.includes(this.fileInfo.mimetype)&&(this.isAllowed=!1),console.log("is disabled : "+this.isAllowed)},computed:{sharePermissions:function(){return this.share.permissions&~OC.PERMISSION_SHARE},randomId:function(){return Math.random().toString(27).substr(2)},title:function(){if(this.share&&this.share.id){if(!this.isShareOwner&&this.share.ownerDisplayName)return this.isEmailShareType?t("files_sharing","{shareWith} by {initiator}",{shareWith:this.share.shareWith,initiator:this.share.ownerDisplayName}):t("files_sharing","Shared via link by {initiator}",{initiator:this.share.ownerDisplayName});if(this.share.label&&""!==this.share.label.trim())return this.isEmailShareType?t("files_sharing","Mail share ({label})",{label:this.share.label.trim()}):t("files_sharing",'Link "{label}"',{label:this.share.label.trim()});if(this.isEmailShareType)return this.share.shareWith}return"dir"===this.fileInfo.type?t("files_sharing","Link to folder"):t("files_sharing","Link to file")},subtitle:function(){return this.isEmailShareType&&this.title!==this.share.shareWith?this.share.shareWith:null},isPasswordProtected:{get:function(){return this.config.enforcePasswordForPublicLink||!!this.share.password},set:function(n){var e=this;return Ee(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=i.default,t.t1=e.share,!n){t.next=8;break}return t.next=5,an();case 5:t.t2=t.sent,t.next=9;break;case 8:t.t2="";case 9:t.t3=t.t2,t.t0.set.call(t.t0,t.t1,"password",t.t3),i.default.set(e.share,"newPassword",e.share.password);case 12:case"end":return t.stop()}}),t)})))()}},isEmailShareType:function(){return!!this.share&&this.share.type===this.SHARE_TYPES.SHARE_TYPE_EMAIL},pendingPassword:function(){return this.config.enforcePasswordForPublicLink&&this.share&&!this.share.id},pendingExpirationDate:function(){return this.config.isDefaultExpireDateEnforced&&this.share&&!this.share.id},hasUnsavedPassword:function(){return void 0!==this.share.newPassword},isFolder:function(){return"dir"===this.fileInfo.type},fileHasCreatePermission:function(){return!!(this.fileInfo.permissions&OC.PERMISSION_CREATE)},shareLink:function(){return window.location.protocol+"//"+window.location.host+(0,c.generateUrl)("/s/")+this.share.token},clipboardTooltip:function(){return this.copied?this.copySuccess?t("files_sharing","Link copied"):t("files_sharing","Cannot copy, please copy the link manually"):t("files_sharing","Copy to clipboard")},externalActions:function(){return this.ExternalLinkActions.actions},isPasswordPolicyEnabled:function(){return"object"===Se(this.config.passwordPolicy)},getFolderOptions:function(){var n={};return n[0]={key:this.publicUploadRValue,value:t("files_sharing","Read only")},n[1]={key:this.publicUploadRWValue,value:t("files_sharing","Read, write and upload")},n[2]={key:this.publicUploadWValue,value:t("files_sharing","File drop (upload only)")},n},getFileOptions:function(){var n={};return n[0]={key:this.publicUploadRValue,value:t("files_sharing","Read only")},n[1]={key:this.publicUploadEValue,value:t("files_sharing","Read and write")},n}},methods:{onNewLinkShare:function(){var n=this;return Ee(regeneratorRuntime.mark((function e(){var r,i,a,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.loading){e.next=2;break}return e.abrupt("return");case 2:if(r={share_type:g.D.SHARE_TYPE_LINK},n.config.isDefaultExpireDateEnforced&&(r.expiration=n.config.defaultExpirationDateString),!n.config.enableLinkPasswordByDefault){e.next=8;break}return e.next=7,an();case 7:r.password=e.sent;case 8:if(!n.config.enforcePasswordForPublicLink&&!n.config.isDefaultExpireDateEnforced){e.next=33;break}if(n.pending=!0,!n.share||n.share.id){e.next=20;break}if(!n.checkShare(n.share)){e.next=17;break}return e.next=14,n.pushNewLinkShare(n.share,!0);case 14:return e.abrupt("return",!0);case 17:return n.open=!0,OC.Notification.showTemporary(t("files_sharing","Error, please enter proper password and/or expiration date")),e.abrupt("return",!1);case 20:if(!n.config.enforcePasswordForPublicLink){e.next=24;break}return e.next=23,an();case 23:r.password=e.sent;case 24:return i=new A(r),e.next=27,new Promise((function(e){n.$emit("add:share",i,e)}));case 27:a=e.sent,n.open=!1,n.pending=!1,a.open=!0,e.next=36;break;case 33:return s=new A(r),e.next=36,n.pushNewLinkShare(s);case 36:case"end":return e.stop()}}),e)})))()},pushNewLinkShare:function(n,e){var t=this;return Ee(regeneratorRuntime.mark((function r(){var i,a,s,o,l;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,!t.loading){r.next=3;break}return r.abrupt("return",!0);case 3:return t.loading=!0,t.errors={},i=(t.fileInfo.path+"/"+t.fileInfo.name).replace("//","/"),r.next=8,t.createShare({path:i,shareType:g.D.SHARE_TYPE_LINK,password:n.password,expireDate:n.expireDate,attributes:JSON.stringify(t.fileInfo.shareAttributes)});case 8:if(a=r.sent,t.open=!1,console.debug("Link share created",a),!e){r.next=17;break}return r.next=14,new Promise((function(n){t.$emit("update:share",a,n)}));case 14:s=r.sent,r.next=20;break;case 17:return r.next=19,new Promise((function(n){t.$emit("add:share",a,n)}));case 19:s=r.sent;case 20:t.config.enforcePasswordForPublicLink||s.copyLink(),r.next=28;break;case 23:r.prev=23,r.t0=r.catch(0),o=r.t0.response,(l=o.data.ocs.meta.message).match(/password/i)?t.onSyncError("password",l):l.match(/date/i)?t.onSyncError("expireDate",l):t.onSyncError("pending",l);case 28:return r.prev=28,t.loading=!1,r.finish(28);case 31:case"end":return r.stop()}}),r,null,[[0,23,28,31]])})))()},togglePermissions:function(n){var e=parseInt(n,10);this.share.permissions=e,this.queueUpdate("permissions"),e===OC.PERMISSION_CREATE&&(this.share.hideDownload=!1,this.queueUpdate("hideDownload"))},copyLink:function(){var n=this;return Ee(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.$copyText(n.shareLink);case 3:n.$refs.copyButton.$el.focus(),n.copySuccess=!0,n.copied=!0,e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),n.copySuccess=!1,n.copied=!0,console.error(e.t0);case 13:return e.prev=13,setTimeout((function(){n.copySuccess=!1,n.copied=!1}),4e3),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[0,8,13,16]])})))()},onPasswordDisable:function(){this.share.password="",this.$delete(this.share,"newPassword"),this.share.id&&this.queueUpdate("password")},onPasswordSubmit:function(){this.hasUnsavedPassword&&(this.share.password=this.share.newPassword.trim(),this.queueUpdate("password"))},onMenuClose:function(){this.onPasswordSubmit(),this.onNoteSubmit()},onCancel:function(){this.$emit("remove:share",this.share)},editPermissions:function(){this.$store.commit("addFromInput",!1),this.$store.commit("addShare",this.share),this.$store.commit("addCurrentTab","permissions")},editNotes:function(){this.$store.commit("addFromInput",!1),this.$store.commit("addShare",this.share),this.$store.commit("addCurrentTab","notes")}}},ke=Ce,xe=r(78230),Pe={};Pe.styleTagTransform=M(),Pe.setAttributes=D(),Pe.insert=T().bind(null,"head"),Pe.domAPI=R(),Pe.insertStyleElement=L(),x()(xe.Z,Pe),xe.Z&&xe.Z.locals&&xe.Z.locals;var Re=(0,B.Z)(ke,(function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("li",{class:n.isEmailShareType?"email-share-link sharing-entry sharing-entry__link":"link-share-link sharing-entry sharing-entry__link"},[t("Avatar",{staticClass:"sharing-entry__avatar",attrs:{"is-no-user":!0,"icon-class":n.isEmailShareType?"avatar-link-share icon-mail-white":"avatar-link-share icon-public-white"}}),n._v(" "),t("div",{staticClass:"sharing-entry__desc"},[n.share.canEdit?n._e():t("div",[t("h5",{attrs:{title:n.title}},[n._v("\n\t\t\t\t"+n._s(n.title)+"\n\t\t\t")]),n._v(" "),n.subtitle?t("p",[n._v("\n\t\t\t\t"+n._s(n.subtitle)+"\n\t\t\t")]):n._e()]),n._v(" "),t("div",{attrs:{id:"app"}},[n.share?[n.share.canEdit?[n.isFolder&&n.fileHasCreatePermission&&n.config.isPublicUploadEnabled?[t("CustomSelect",{staticClass:"select",attrs:{title:n.title,options:n.getFolderOptions,default:n.sharePermissions},on:{setSelectedOption:function(e){return n.togglePermissions(e)}}})]:[t("CustomSelect",{staticClass:"select",attrs:{title:n.title,isDisable:n.isAllowed,options:n.getFileOptions,default:n.sharePermissions},on:{setSelectedOption:function(e){return n.togglePermissions(e)}}})]]:n._e()]:n._e()],2)]),n._v(" "),n.share&&!n.isEmailShareType&&n.share.token?t("Actions",{ref:"copyButton",staticClass:"sharing-entry__copy"},[t("ActionLink",{attrs:{href:n.shareLink,target:"_blank",icon:n.copied&&n.copySuccess?"icon-checkmark-color":"icon-clippy"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),n.copyLink.apply(null,arguments)}}},[n._v("\n\t\t\t"+n._s(n.clipboardTooltip)+"\n\t\t")])],1):n._e(),n._v(" "),n.pending||!n.pendingPassword&&!n.pendingExpirationDate?n.loading?t("div",{staticClass:"icon-loading-small sharing-entry__loading"}):t("Actions",{staticClass:"sharing-entry__actions",attrs:{"menu-align":"right",open:n.open},on:{"update:open":function(e){n.open=e},close:n.onMenuClose}},[n.share?[n._l(n.externalActions,(function(e,r){var i=e.icon,a=e.url,s=e.name;return t("ActionLink",{key:r,attrs:{href:a(n.shareLink),icon:i,target:"_blank"}},[n._v("\n\t\t\t\t"+n._s(s)+"\n\t\t\t")])})),n._v(" "),n.share.canEdit?t("ActionButton",{attrs:{icon:"icon-settings",disabled:n.saving},on:{click:function(e){return e.preventDefault(),n.editPermissions.apply(null,arguments)}}},[n._v("\n\t\t\t\t"+n._s(n.t("files_sharing","Advanced permission"))+"\n\t\t\t")]):n._e(),n._v(" "),n.share.canEdit&&n.isEmailShareType?t("ActionButton",{attrs:{icon:"icon-mail",disabled:n.saving},on:{click:function(e){return e.preventDefault(),n.editNotes.apply(null,arguments)}}},[n._v("\n\t\t\t\t"+n._s(n.t("files_sharing","Send new mail"))+"\n\t\t\t")]):n._e(),n._v(" "),n.share.canDelete?t("ActionButton",{attrs:{icon:"icon-close",disabled:n.saving},on:{click:function(e){return e.preventDefault(),n.onDelete.apply(null,arguments)}}},[n._v("\n\t\t\t\t"+n._s(n.t("files_sharing","Unshare"))+"\n\t\t\t")]):n._e()]:n.canReshare?t("ActionButton",{staticClass:"new-share-link",attrs:{icon:n.loading?"icon-loading-small":"icon-add"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),n.onNewLinkShare.apply(null,arguments)}}},[n._v("\n\t\t\t"+n._s(n.t("files_sharing","Create a new share link"))+"\n\t\t")]):n._e()],2):t("Actions",{staticClass:"sharing-entry__actions",attrs:{"menu-align":"right",open:n.open},on:{"update:open":function(e){n.open=e},close:n.onNewLinkShare}},[n.errors.pending?t("ActionText",{class:{error:n.errors.pending},attrs:{icon:"icon-error"}},[n._v("\n\t\t\t"+n._s(n.errors.pending)+"\n\t\t")]):t("ActionText",{attrs:{icon:"icon-info"}},[n._v("\n\t\t\t"+n._s(n.t("files_sharing","Please enter the following required information before creating the share"))+"\n\t\t")]),n._v(" "),n.pendingPassword?t("ActionText",{attrs:{icon:"icon-password"}},[n._v("\n\t\t\t"+n._s(n.t("files_sharing","Password protection (enforced)"))+"\n\t\t")]):n.config.enableLinkPasswordByDefault?t("ActionCheckbox",{staticClass:"share-link-password-checkbox",attrs:{checked:n.isPasswordProtected,disabled:n.config.enforcePasswordForPublicLink||n.saving},on:{"update:checked":function(e){n.isPasswordProtected=e},uncheck:n.onPasswordDisable}},[n._v("\n\t\t\t"+n._s(n.t("files_sharing","Password protection"))+"\n\t\t")]):n._e(),n._v(" "),n.pendingPassword||n.share.password?t("ActionInput",{directives:[{name:"tooltip",rawName:"v-tooltip.auto",value:{content:n.errors.password,show:n.errors.password,trigger:"manual",defaultContainer:"#app-sidebar"},expression:"{\n\t\t\t\tcontent: errors.password,\n\t\t\t\tshow: errors.password,\n\t\t\t\ttrigger: 'manual',\n\t\t\t\tdefaultContainer: '#app-sidebar'\n\t\t\t}",modifiers:{auto:!0}}],staticClass:"share-link-password",attrs:{value:n.share.password,disabled:n.saving,required:n.config.enableLinkPasswordByDefault||n.config.enforcePasswordForPublicLink,minlength:n.isPasswordPolicyEnabled&&n.config.passwordPolicy.minLength,icon:"",autocomplete:"new-password"},on:{"update:value":function(e){return n.$set(n.share,"password",e)},submit:n.onNewLinkShare}},[n._v("\n\t\t\t"+n._s(n.t("files_sharing","Enter a password"))+"\n\t\t")]):n._e(),n._v(" "),n.pendingExpirationDate?t("ActionText",{attrs:{icon:"icon-calendar-dark"}},[n._v("\n\t\t\t"+n._s(n.t("files_sharing","Expiration date (enforced)"))+"\n\t\t")]):n._e(),n._v(" "),n.pendingExpirationDate?t("ActionInput",{directives:[{name:"tooltip",rawName:"v-tooltip.auto",value:{content:n.errors.expireDate,show:n.errors.expireDate,trigger:"manual",defaultContainer:"#app-sidebar"},expression:"{\n\t\t\t\tcontent: errors.expireDate,\n\t\t\t\tshow: errors.expireDate,\n\t\t\t\ttrigger: 'manual',\n\t\t\t\tdefaultContainer: '#app-sidebar'\n\t\t\t}",modifiers:{auto:!0}}],staticClass:"share-link-expire-date",attrs:{disabled:n.saving,"first-day-of-week":n.firstDay,lang:n.lang,icon:"",type:"date","value-type":"format","disabled-date":n.disabledDate},model:{value:n.share.expireDate,callback:function(e){n.$set(n.share,"expireDate",e)},expression:"share.expireDate"}},[n._v("\n\t\t\t"+n._s(n.t("files_sharing","Enter a date"))+"\n\t\t")]):n._e(),n._v(" "),t("ActionButton",{attrs:{icon:"icon-checkmark"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),n.onNewLinkShare.apply(null,arguments)}}},[n._v("\n\t\t\t"+n._s(n.t("files_sharing","Create share"))+"\n\t\t")]),n._v(" "),t("ActionButton",{attrs:{icon:"icon-close"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),n.onCancel.apply(null,arguments)}}},[n._v("\n\t\t\t"+n._s(n.t("files_sharing","Cancel"))+"\n\t\t")])],1)],1)}),[],!1,null,"656b538e",null),Oe={name:"SharingLinkList",components:{SharingEntryLink:Re.exports},mixins:[v],props:{fileInfo:{type:Object,default:function(){},required:!0},shares:{type:Array,default:function(){return[]},required:!0},canReshare:{type:Boolean,required:!0}},data:function(){return{canLinkShare:OC.getCapabilities().files_sharing.public.enabled}},computed:{hasLinkShares:function(){var n=this;return this.shares.filter((function(e){return e.type===n.SHARE_TYPES.SHARE_TYPE_LINK})).length>0},hasShares:function(){return this.shares.length>0}},methods:{addShare:function(n,e){this.shares.unshift(n),this.awaitForShare(n,e)},awaitForShare:function(n,e){var t=this;this.$nextTick((function(){var r=t.$children.find((function(e){return e.share===n}));r&&e(r)}))},removeShare:function(n){var e=this.shares.findIndex((function(e){return e===n}));this.shares.splice(e,1)}}},Te=(0,B.Z)(Oe,(function(){var n=this,e=n.$createElement,t=n._self._c||e;return n.canLinkShare?t("ul",{staticClass:"sharing-link-list"},[n.hasShares?n._l(n.shares,(function(e,r){return t("SharingEntryLink",{key:e.id,attrs:{"can-reshare":n.canReshare,share:n.shares[r],"file-info":n.fileInfo},on:{"update:share":[function(e){return n.$set(n.shares,r,e)},function(e){return n.awaitForShare.apply(void 0,arguments)}],"add:share":function(e){return n.addShare.apply(void 0,arguments)},"remove:share":n.removeShare}})})):n._e()],2):n._e()}),[],!1,null,null,null),Ie=Te.exports,De=r(97654),Ne=r.n(De);function Le(n){return Le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Le(n)}var Ye={name:"SharingEntry",components:{Actions:S(),ActionButton:te(),ActionCheckbox:kn(),ActionInput:Pn(),ActionTextEditable:Ne(),Avatar:h(),CustomSelect:be},directives:{Tooltip:E()},mixins:[Dn],data:function(){return{permissionsEdit:OC.PERMISSION_UPDATE,permissionsCreate:OC.PERMISSION_CREATE,permissionsDelete:OC.PERMISSION_DELETE,permissionsRead:OC.PERMISSION_READ,permissionsShare:OC.PERMISSION_SHARE,publicUploadRWValue:OC.PERMISSION_UPDATE|OC.PERMISSION_CREATE|OC.PERMISSION_READ|OC.PERMISSION_DELETE,publicUploadRValue:OC.PERMISSION_READ,publicUploadWValue:OC.PERMISSION_CREATE,publicUploadEValue:OC.PERMISSION_UPDATE|OC.PERMISSION_READ}},computed:{sharePermissions:function(){return this.share.permissions&~OC.PERMISSION_SHARE},randomId:function(){return Math.random().toString(27).substr(2)},title:function(){var n=this.share.shareWithDisplayName;return this.share.type===this.SHARE_TYPES.SHARE_TYPE_GROUP?n+=" (".concat(t("files_sharing","group"),")"):this.share.type===this.SHARE_TYPES.SHARE_TYPE_ROOM?n+=" (".concat(t("files_sharing","conversation"),")"):this.share.type===this.SHARE_TYPES.SHARE_TYPE_REMOTE?n+=" (".concat(t("files_sharing","remote"),")"):this.share.type===this.SHARE_TYPES.SHARE_TYPE_REMOTE_GROUP?n+=" (".concat(t("files_sharing","remote group"),")"):this.share.type===this.SHARE_TYPES.SHARE_TYPE_GUEST&&(n+=" (".concat(t("files_sharing","guest"),")")),n},tooltip:function(){if(this.share.owner!==this.share.uidFileOwner){var n={user:this.share.shareWithDisplayName,owner:this.share.ownerDisplayName};return this.share.type===this.SHARE_TYPES.SHARE_TYPE_GROUP?t("files_sharing","Shared with the group {user} by {owner}",n):this.share.type===this.SHARE_TYPES.SHARE_TYPE_ROOM?t("files_sharing","Shared with the conversation {user} by {owner}",n):t("files_sharing","Shared with {user} by {owner}",n)}return null},isRemote:function(){return this.share.type===this.SHARE_TYPES.SHARE_TYPE_REMOTE||this.share.type===this.SHARE_TYPES.SHARE_TYPE_REMOTE_GROUP},canSetEdit:function(){return this.fileInfo.sharePermissions&OC.PERMISSION_UPDATE||this.canEdit},canEdit:{get:function(){return this.share.hasUpdatePermission},set:function(n){this.updatePermissions({isEditChecked:n})}},canCreate:{get:function(){return this.share.hasCreatePermission},set:function(n){this.updatePermissions({isCreateChecked:n})}},canDelete:{get:function(){return this.share.hasDeletePermission},set:function(n){this.updatePermissions({isDeleteChecked:n})}},canReshare:{get:function(){return this.share.hasSharePermission},set:function(n){this.updatePermissions({isReshareChecked:n})}},hasRead:{get:function(){return this.share.hasReadPermission}},fileHasCreatePermission:function(){return!!(this.fileInfo.permissions&OC.PERMISSION_CREATE)},isFolder:function(){return"dir"===this.fileInfo.type},hasStatus:function(){return this.share.type===this.SHARE_TYPES.SHARE_TYPE_USER&&"object"===Le(this.share.status)&&!Array.isArray(this.share.status)},getFolderOptions:function(){var n={};return n[0]={key:this.publicUploadRValue,value:t("files_sharing","Read only")},n[1]={key:this.publicUploadRWValue,value:t("files_sharing","Read, write and upload")},n},getFileOptions:function(){var n={};return n[0]={key:this.publicUploadRValue,value:t("files_sharing","Read only")},n[1]={key:this.publicUploadEValue,value:t("files_sharing","Read and write")},n}},methods:{updatePermissions:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=n.isEditChecked,t=void 0===e?this.canEdit:e,r=n.isCreateChecked,i=void 0===r?this.canCreate:r,a=n.isDeleteChecked,s=void 0===a?this.canDelete:a,o=n.isReshareChecked,l=void 0===o?this.canReshare:o,c=n.isDownloadChecked,u=void 0===c?this.canDownload:c,h=0|(this.hasRead?this.permissionsRead:0)|(i?this.permissionsCreate:0)|(s?this.permissionsDelete:0)|(t?this.permissionsEdit:0)|(l?this.permissionsShare:0);this.share.permissions=h,this.share.hasDownloadPermission!==u&&(this.share.hasDownloadPermission=u),this.queueUpdate("permissions","attributes")},togglePermissions:function(n){var e=parseInt(n,10)|(this.canReshare?this.permissionsShare:0);this.share.permissions=e,this.queueUpdate("permissions")},onMenuClose:function(){this.onNoteSubmit()},editPermissions:function(){this.$store.commit("addFromInput",!1),this.$store.commit("addShare",this.share),this.$store.commit("addCurrentTab","permissions")},editNotes:function(){this.$store.commit("addFromInput",!1),this.$store.commit("addShare",this.share),this.$store.commit("addCurrentTab","notes")}}},Me=Ye,He=r(94434),Ue={};Ue.styleTagTransform=M(),Ue.setAttributes=D(),Ue.insert=T().bind(null,"head"),Ue.domAPI=R(),Ue.insertStyleElement=L(),x()(He.Z,Ue),He.Z&&He.Z.locals&&He.Z.locals;var Be=(0,B.Z)(Me,(function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("li",{staticClass:"sharing-entry"},[t("Avatar",{staticClass:"sharing-entry__avatar",attrs:{"is-no-user":n.share.type!==n.SHARE_TYPES.SHARE_TYPE_USER,user:n.share.shareWith,"display-name":n.share.shareWithDisplayName,"tooltip-message":n.share.type===n.SHARE_TYPES.SHARE_TYPE_USER?n.share.shareWith:"","menu-position":"left",url:n.share.shareWithAvatar}}),n._v(" "),t(n.share.shareWithLink?"a":"div",{directives:[{name:"tooltip",rawName:"v-tooltip.auto",value:n.tooltip,expression:"tooltip",modifiers:{auto:!0}}],tag:"component",staticClass:"sharing-entry__desc",attrs:{href:n.share.shareWithLink}},[n.share.canEdit?n._e():t("div",[t("h5",[n._v(n._s(n.title)),n.isUnique?n._e():t("span",{staticClass:"sharing-entry__desc-unique"},[n._v(" ("+n._s(n.share.shareWithDisplayNameUnique)+")")])]),n._v(" "),n.hasStatus?t("p",[t("span",[n._v(n._s(n.share.status.icon||""))]),n._v(" "),t("span",[n._v(n._s(n.share.status.message||""))])]):n._e()]),n._v(" "),t("div",{attrs:{id:"app"}},[n.share.canEdit?[n.isFolder&&n.fileHasCreatePermission&&n.config.isPublicUploadEnabled?[t("CustomSelect",{staticClass:"select",attrs:{title:n.title,options:n.getFolderOptions,default:n.sharePermissions},on:{setSelectedOption:function(e){return n.togglePermissions(e)}}})]:[t("CustomSelect",{staticClass:"select",attrs:{title:n.title,options:n.getFileOptions,default:n.sharePermissions},on:{setSelectedOption:function(e){return n.togglePermissions(e)}}})]]:n._e()],2)]),n._v(" "),!1===n.open?t("Actions",{staticClass:"sharing-entry__actions",attrs:{"menu-align":"right"},on:{close:n.onMenuClose}},[n.share.canEdit?t("ActionButton",{attrs:{icon:"icon-settings",disabled:n.saving||!n.canSetEdit,share:n.share},on:{click:function(e){return e.preventDefault(),n.editPermissions.apply(null,arguments)}}},[n._v("\n\t\t\t"+n._s(n.t("files_sharing","Advanced permission"))+"\n\t\t")]):n._e(),n._v(" "),n.share.canEdit?t("ActionButton",{attrs:{icon:"icon-mail",disabled:n.saving||!n.canSetEdit,share:n.share},on:{click:function(e){return e.preventDefault(),n.editNotes.apply(null,arguments)}}},[n._v("\n\t\t\t"+n._s(n.t("files_sharing","Send new mail"))+"\n\t\t")]):n._e(),n._v(" "),n.share.canDelete?t("ActionButton",{attrs:{icon:"icon-close",disabled:n.saving||!n.canSetEdit},on:{click:function(e){return e.preventDefault(),n.onDelete.apply(null,arguments)}}},[n._v("\n\t\t\t"+n._s(n.t("files_sharing","Unshare"))+"\n\t\t")]):n._e()],1):n._e()],1)}),[],!1,null,"782ccb43",null);function je(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}var $e={name:"SharingList",components:{SharingEntry:Be.exports},mixins:[v],props:{fileInfo:{type:Object,default:function(){},required:!0},shares:{type:Array,default:function(){return[]},required:!0}},computed:{hasShares:function(){return 0===this.shares.length},isUnique:function(){var n=this;return function(e){return(t=n.shares,function(n){if(Array.isArray(n))return je(n)}(t)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(t)||function(n,e){if(n){if("string"==typeof n)return je(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);return"Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t?Array.from(n):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?je(n,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).filter((function(t){return e.type===n.SHARE_TYPES.SHARE_TYPE_USER&&e.shareWithDisplayName===t.shareWithDisplayName})).length<=1;var t}}},methods:{removeShare:function(n){var e=this.shares.findIndex((function(e){return e===n}));this.shares.splice(e,1)}}},We=(0,B.Z)($e,(function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("ul",{staticClass:"sharing-sharee-list"},n._l(n.shares,(function(e){return t("SharingEntry",{key:e.id,attrs:{"file-info":n.fileInfo,share:e,"is-unique":n.isUnique(e)},on:{"remove:share":n.removeShare}})})),1)}),[],!1,null,null,null).exports;function Fe(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Ze(n,e,t,r,i,a,s){try{var o=n[a](s),l=o.value}catch(n){return void t(n)}o.done?e(l):Promise.resolve(l).then(r,i)}function qe(n){return function(){var e=this,t=arguments;return new Promise((function(r,i){var a=n.apply(e,t);function s(n){Ze(a,r,i,s,o,"next",n)}function o(n){Ze(a,r,i,s,o,"throw",n)}s(void 0)}))}}function Ve(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function Ge(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?Ve(Object(t),!0).forEach((function(e){Ke(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Ve(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function Ke(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var ze={name:"SharingTab",components:{Avatar:h(),CollectionList:l.G,SharingEntryInternal:G,SharingEntrySimple:j,SharingInherited:Ae,SharingInput:Sn,SharingLinkList:Ie,SharingList:We,SharingPermissions:Zn,SharingNotes:ne},mixins:[v],data:function(){return{config:new f,error:"",expirationInterval:null,loading:!0,fileInfo:null,reshare:null,sharedWithMe:{},shares:[],linkShares:[],sections:OCA.Sharing.ShareTabSections.getSections()}},computed:Ge(Ge({},(0,Nn.Se)({currentTab:"getCurrentTab",share:"getShare"})),{},{isSharedWithMe:function(){return Object.keys(this.sharedWithMe).length>0},canReshare:function(){return!!(this.fileInfo.permissions&OC.PERMISSION_SHARE)||!!(this.reshare&&this.reshare.hasSharePermission&&this.config.isResharingAllowed)},hasShares:function(){return this.shares.length>0},hasLinkShares:function(){return this.linkShares.length>0}}),mounted:function(){var n=this;this.$root.$on("update",(function(e){n.update(e)}))},methods:{isLinkShare:function(){return this.SHARE_TYPES.SHARE_TYPE_LINK===this.shareType},isEmailShare:function(){return this.SHARE_TYPES.SHARE_TYPE_EMAIL===this.shareType},update:function(n){var e=this;return qe(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.fileInfo=n,e.resetState(),e.getShares();case 3:case"end":return t.stop()}}),t)})))()},getShares:function(){var n=this;return qe(regeneratorRuntime.mark((function e(){var r,i,a,s,o,l,u,h,p,f,g,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n.loading=!0,r=(0,c.generateOcsUrl)("apps/files_sharing/api/v1/shares"),i="json",a=(n.fileInfo.path+"/"+n.fileInfo.name).replace("//","/"),s=d.default.get(r,{params:{format:i,path:a,reshares:!0}}),o=d.default.get(r,{params:{format:i,path:a,shared_with_me:!0}}),e.next=9,Promise.all([s,o]);case 9:l=e.sent,v=2,u=function(n){if(Array.isArray(n))return n}(A=l)||function(n,e){var t=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var r,i,a=[],s=!0,o=!1;try{for(t=t.call(n);!(s=(r=t.next()).done)&&(a.push(r.value),!e||a.length!==e);s=!0);}catch(n){o=!0,i=n}finally{try{s||null==t.return||t.return()}finally{if(o)throw i}}return a}}(A,v)||function(n,e){if(n){if("string"==typeof n)return Fe(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);return"Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t?Array.from(n):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Fe(n,e):void 0}}(A,v)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),h=u[0],p=u[1],n.loading=!1,n.processSharedWithMe(p),n.processShares(h),e.next=23;break;case 18:e.prev=18,e.t0=e.catch(0),null!==(f=e.t0.response.data)&&void 0!==f&&null!==(g=f.ocs)&&void 0!==g&&null!==(m=g.meta)&&void 0!==m&&m.message?n.error=e.t0.response.data.ocs.meta.message:n.error=t("files_sharing","Unable to load the shares list"),n.loading=!1,console.error("Error loading the shares list",e.t0);case 23:case"end":return e.stop()}var A,v}),e,null,[[0,18]])})))()},resetState:function(){clearInterval(this.expirationInterval),this.loading=!0,this.error="",this.sharedWithMe={},this.shares=[],this.linkShares=[]},updateExpirationSubtitle:function(n){var e=moment(n.expireDate).unix();this.$set(this.sharedWithMe,"subtitle",t("files_sharing","Expires {relativetime}",{relativetime:OC.Util.relativeModifiedDate(1e3*e)})),moment().unix()>e&&(clearInterval(this.expirationInterval),this.$set(this.sharedWithMe,"subtitle",t("files_sharing","this share just expired.")))},processShares:function(n){var e=this,t=n.data;if(t.ocs&&t.ocs.data&&t.ocs.data.length>0){var r=t.ocs.data.map((function(n){return new A(n)})).sort((function(n,e){return e.createdTime-n.createdTime}));this.linkShares=r.filter((function(n){return n.type===e.SHARE_TYPES.SHARE_TYPE_LINK||n.type===e.SHARE_TYPES.SHARE_TYPE_EMAIL})),this.shares=r.filter((function(n){return n.type!==e.SHARE_TYPES.SHARE_TYPE_LINK&&n.type!==e.SHARE_TYPES.SHARE_TYPE_EMAIL})),console.debug("Processed",this.linkShares.length,"link share(s)"),console.debug("Processed",this.shares.length,"share(s)")}},processSharedWithMe:function(n){var e=n.data;if(e.ocs&&e.ocs.data&&e.ocs.data[0]){var r=new A(e),i=function(n){return n.type===g.D.SHARE_TYPE_GROUP?t("files_sharing","Shared with you and the group {group} by {owner}",{group:n.shareWithDisplayName,owner:n.ownerDisplayName},void 0,{escape:!1}):n.type===g.D.SHARE_TYPE_CIRCLE?t("files_sharing","Shared with you and {circle} by {owner}",{circle:n.shareWithDisplayName,owner:n.ownerDisplayName},void 0,{escape:!1}):n.type===g.D.SHARE_TYPE_ROOM?n.shareWithDisplayName?t("files_sharing","Shared with you and the conversation {conversation} by {owner}",{conversation:n.shareWithDisplayName,owner:n.ownerDisplayName},void 0,{escape:!1}):t("files_sharing","Shared with you in a conversation by {owner}",{owner:n.ownerDisplayName},void 0,{escape:!1}):t("files_sharing","Shared with you by {owner}",{owner:n.ownerDisplayName},void 0,{escape:!1})}(r),a=r.ownerDisplayName,s=r.owner;this.sharedWithMe={displayName:a,title:i,user:s},this.reshare=r,r.expireDate&&moment(r.expireDate).unix()>moment().unix()&&(this.updateExpirationSubtitle(r),this.expirationInterval=setInterval(this.updateExpirationSubtitle,1e4,r))}else this.fileInfo&&void 0!==this.fileInfo.shareOwnerId&&this.fileInfo.shareOwnerId!==OC.currentUser&&(this.sharedWithMe={displayName:this.fileInfo.shareOwner,title:t("files_sharing","Shared with you by {owner}",{owner:this.fileInfo.shareOwner},void 0,{escape:!1}),user:this.fileInfo.shareOwnerId})},addShare:function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};n.type===this.SHARE_TYPES.SHARE_TYPE_EMAIL?this.linkShares.unshift(n):this.shares.unshift(n),this.awaitForShare(n,e)},awaitForShare:function(n,e){var t=this.$refs.shareList;n.type===this.SHARE_TYPES.SHARE_TYPE_EMAIL&&(t=this.$refs.linkShareList),this.$nextTick((function(){var r=t.$children.find((function(e){return e.share===n}));r&&e(r)}))}}},Qe=ze,Je=r(79222),Xe={};Xe.styleTagTransform=M(),Xe.setAttributes=D(),Xe.insert=T().bind(null,"head"),Xe.domAPI=R(),Xe.insertStyleElement=L(),x()(Je.Z,Xe),Je.Z&&Je.Z.locals&&Je.Z.locals;var nt=(0,B.Z)(Qe,(function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{class:{"icon-loading":n.loading}},[n.error?t("div",{staticClass:"emptycontent",class:{emptyContentWithSections:n.sections.length>0}},[t("div",{staticClass:"icon icon-error"}),n._v(" "),t("h2",[n._v(n._s(n.error))])]):["default"==n.currentTab?t("div",[n.isSharedWithMe?t("SharingEntrySimple",n._b({staticClass:"sharing-entry__reshare",scopedSlots:n._u([{key:"avatar",fn:function(){return[t("Avatar",{staticClass:"sharing-entry__avatar",attrs:{user:n.sharedWithMe.user,"display-name":n.sharedWithMe.displayName,"tooltip-message":""}})]},proxy:!0}],null,!1,1643724538)},"SharingEntrySimple",n.sharedWithMe,!1)):n._e(),n._v(" "),t("p",{staticClass:"sharing-message"},[n.canReshare?t("span",[n.isSharedWithMe?t("span",[n._v("\n\t\t\t\t\t\t"+n._s(n.t("files_sharing","Resharing is allowed."))+"\n\t\t\t\t\t")]):n._e(),n._v("\n\t\t\t\t\t"+n._s(n.t("files_sharing","You can create links or send shares by mail. If you invite MagentaCLOUD users, you have more opportunities for collaboration."))+"\n\t\t\t\t")]):t("span")]),n._v(" "),n.loading?n._e():t("SharingInput",{attrs:{"can-reshare":n.canReshare,"file-info":n.fileInfo,"link-shares":n.linkShares,reshare:n.reshare,shares:n.shares},on:{"add:share":n.addShare}}),n._v(" "),n.canReshare?t("div",{staticClass:"your-shares"},[n._v("\n\t\t\t\t\t"+n._s(n.t("files_sharing","Your shares"))+"\n\t\t\t\t")]):n._e(),n._v(" "),n.hasShares||n.hasLinkShares||!n.canReshare?n._e():[t("label",[n._v("\n\t\t\t\t\t\t"+n._s(n.t("files_sharing","No shares created yet."))+"\n\t\t\t\t\t")])],n._v(" "),n.loading?n._e():t("SharingLinkList",{ref:"linkShareList",attrs:{"can-reshare":n.canReshare,"file-info":n.fileInfo,shares:n.linkShares}}),n._v(" "),n.loading?n._e():t("SharingList",{ref:"shareList",attrs:{shares:n.shares,"file-info":n.fileInfo}}),n._v(" "),n.canReshare&&!n.loading?t("SharingInherited",{attrs:{"file-info":n.fileInfo}}):n._e(),n._v(" "),t("SharingEntryInternal",{attrs:{"file-info":n.fileInfo}}),n._v(" "),n.fileInfo?t("CollectionList",{attrs:{id:""+n.fileInfo.id,type:"file",name:n.fileInfo.name}}):n._e(),n._v(" "),n._l(n.sections,(function(e,r){return t("div",{key:r,ref:"section-"+r,refInFor:!0,staticClass:"sharingTab__additionalContent"},[t(e(n.$refs["section-"+r],n.fileInfo),{tag:"component",attrs:{"file-info":n.fileInfo}})],1)}))],2):n._e(),n._v(" "),"permissions"==n.currentTab?t("div",[t("SharingPermissions",{attrs:{share:n.share,"file-info":n.fileInfo}})],1):n._e(),n._v(" "),"notes"==n.currentTab?t("div",[t("SharingNotes",{attrs:{share:n.share,"file-info":n.fileInfo}})],1):n._e()]],2)}),[],!1,null,"500974a6",null).exports;function et(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}var tt=function(){function n(){var e,t;!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),t=void 0,(e="_state")in this?Object.defineProperty(this,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):this[e]=t,this._state={},this._state.results=[],console.debug("OCA.Sharing.ShareSearch initialized")}var e,t;return e=n,(t=[{key:"state",get:function(){return this._state}},{key:"addNewResult",value:function(n){return""!==n.displayName.trim()&&"function"==typeof n.handler?(this._state.results.push(n),!0):(console.error("Invalid search result provided",n),!1)}}])&&et(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),n}();function rt(n){return rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},rt(n)}function it(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}var at=function(){function n(){var e,t;!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),t=void 0,(e="_state")in this?Object.defineProperty(this,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):this[e]=t,this._state={},this._state.actions=[],console.debug("OCA.Sharing.ExternalLinkActions initialized")}var e,t;return e=n,(t=[{key:"state",get:function(){return this._state}},{key:"registerAction",value:function(n){return console.warn("OCA.Sharing.ExternalLinkActions is deprecated, use OCA.Sharing.ExternalShareAction instead"),"object"===rt(n)&&n.icon&&n.name&&n.url?(this._state.actions.push(n),!0):(console.error("Invalid action provided",n),!1)}}])&&it(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),n}();function st(n){return st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},st(n)}function ot(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}var lt=function(){function n(){var e,t;!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),t=void 0,(e="_state")in this?Object.defineProperty(this,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):this[e]=t,this._state={},this._state.actions=[],console.debug("OCA.Sharing.ExternalShareActions initialized")}var e,t;return e=n,(t=[{key:"state",get:function(){return this._state}},{key:"registerAction",value:function(n){return"object"===st(n)&&"string"==typeof n.id&&"function"==typeof n.data&&Array.isArray(n.shareType)&&"object"===st(n.handlers)&&Object.values(n.handlers).every((function(n){return"function"==typeof n}))?this._state.actions.findIndex((function(e){return e.id===n.id}))>-1?(console.error("An action with the same id ".concat(n.id," already exists"),n),!1):(this._state.actions.push(n),!0):(console.error("Invalid action provided",n),!1)}}])&&ot(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),n}();function ct(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}var ut=function(){function n(){var e,t;!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),t=void 0,(e="_sections")in this?Object.defineProperty(this,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):this[e]=t,this._sections=[]}var e,t;return e=n,(t=[{key:"registerSection",value:function(n){this._sections.push(n)}},{key:"getSections",value:function(){return this._sections}}])&&ct(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),n}();i.default.use(Nn.ZP);var ht=new Nn.ZP.Store({state:{share:{type:A,default:null},option:{},fromInput:Boolean,currentTab:"default"},mutations:{addShare:function(n,e){n.share=e,console.debug("this is addShare mutation",e)},addOption:function(n,e){n.option=e,console.debug("this is addOptions mutation",e)},addFromInput:function(n,e){n.fromInput=e,console.debug("this is addFromInput mutation",e)},addCurrentTab:function(n,e){n.currentTab=e,console.debug("this is addCurrentTab mutation",e)}},actions:{},getters:{getShare:function(n){return console.debug("this is getter getShare",n.share),n.share},getOption:function(n){return console.debug("this is getter getOption",n.option),n.option},getFromInput:function(n){return console.debug("this is getter getFromInput",n.fromInput),n.fromInput},getCurrentTab:function(n){return console.debug("this is getter getCurrentTab",n.currentTab),n.currentTab}}});function dt(n,e,t,r,i,a,s){try{var o=n[a](s),l=o.value}catch(n){return void t(n)}o.done?e(l):Promise.resolve(l).then(r,i)}window.OCA.Sharing||(window.OCA.Sharing={}),Object.assign(window.OCA.Sharing,{ShareSearch:new tt}),Object.assign(window.OCA.Sharing,{ExternalLinkActions:new at}),Object.assign(window.OCA.Sharing,{ExternalShareActions:new lt}),Object.assign(window.OCA.Sharing,{ShareTabSections:new ut}),i.default.prototype.t=o.translate,i.default.prototype.n=o.translatePlural,i.default.use(s());var pt=i.default.extend(nt),ft=null;window.addEventListener("DOMContentLoaded",(function(){OCA.Files&&OCA.Files.Sidebar&&OCA.Files.Sidebar.registerTab(new OCA.Files.Sidebar.Tab({id:"sharing",name:(0,o.translate)("files_sharing","Sharing"),icon:"icon-share",mount:function(n,e,t){return(r=regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return ft&&ft.$destroy(),ft=new pt({parent:t,store:ht}),r.next=4,ft.update(e);case 4:ft.$mount(n),OCA.Files.Sidebar.setActiveTab("sharing");case 6:case"end":return r.stop()}}),r)})),function(){var n=this,e=arguments;return new Promise((function(t,i){var a=r.apply(n,e);function s(n){dt(a,t,i,s,o,"next",n)}function o(n){dt(a,t,i,s,o,"throw",n)}s(void 0)}))})();var r},update:function(n){ft.update(n),ht.commit("addCurrentTab","default")},destroy:function(){ft.$destroy(),ht.commit("addCurrentTab","default"),ft=null}}))}))},94434:function(n,e,t){var r=t(87537),i=t.n(r),a=t(23645),s=t.n(a)()(i());s.push([n.id,".sharing-entry[data-v-782ccb43]{display:flex;align-items:center;min-height:44px}.sharing-entry__desc[data-v-782ccb43]{display:flex;flex-direction:column;justify-content:space-between;padding:8px;line-height:1.2em}.sharing-entry__desc p[data-v-782ccb43]{color:var(--color-text-maxcontrast)}.sharing-entry__desc-unique[data-v-782ccb43]{color:var(--color-text-maxcontrast)}.sharing-entry__actions[data-v-782ccb43]{margin-left:auto}.sharing-entry__desc[data-v-782ccb43]{overflow:inherit !important}#app[data-v-782ccb43]{min-width:250px}","",{version:3,sources:["webpack://./apps/files_sharing/src/components/SharingEntry.vue"],names:[],mappings:"AAgXA,gCACC,YAAA,CACA,kBAAA,CACA,eAAA,CACA,sCACC,YAAA,CACA,qBAAA,CACA,6BAAA,CACA,WAAA,CACA,iBAAA,CACA,wCACC,mCAAA,CAED,6CACC,mCAAA,CAGF,yCACC,gBAAA,CAIF,sCACC,2BAAA,CAGD,sBACC,eAAA",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.sharing-entry {\n\tdisplay: flex;\n\talign-items: center;\n\tmin-height: 44px;\n\t&__desc {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tjustify-content: space-between;\n\t\tpadding: 8px;\n\t\tline-height: 1.2em;\n\t\tp {\n\t\t\tcolor: var(--color-text-maxcontrast);\n\t\t}\n\t\t&-unique {\n\t\t\tcolor: var(--color-text-maxcontrast);\n\t\t}\n\t}\n\t&__actions {\n\t\tmargin-left: auto;\n\t}\n}\n\n.sharing-entry__desc {\n\toverflow: inherit !important;\n}\n\n#app {\n\tmin-width: 250px;\n}\n"],sourceRoot:""}]),e.Z=s},71296:function(n,e,t){var r=t(87537),i=t.n(r),a=t(23645),s=t.n(a)()(i());s.push([n.id,".sharing-entry[data-v-29845767]{display:flex;align-items:center;height:44px}.sharing-entry__desc[data-v-29845767]{display:flex;flex-direction:column;justify-content:space-between;padding:8px;line-height:1.2em}.sharing-entry__desc p[data-v-29845767]{color:var(--color-text-maxcontrast)}.sharing-entry__actions[data-v-29845767]{margin-left:auto}","",{version:3,sources:["webpack://./apps/files_sharing/src/components/SharingEntryInherited.vue"],names:[],mappings:"AAgGA,gCACC,YAAA,CACA,kBAAA,CACA,WAAA,CACA,sCACC,YAAA,CACA,qBAAA,CACA,6BAAA,CACA,WAAA,CACA,iBAAA,CACA,wCACC,mCAAA,CAGF,yCACC,gBAAA",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.sharing-entry {\n\tdisplay: flex;\n\talign-items: center;\n\theight: 44px;\n\t&__desc {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tjustify-content: space-between;\n\t\tpadding: 8px;\n\t\tline-height: 1.2em;\n\t\tp {\n\t\t\tcolor: var(--color-text-maxcontrast);\n\t\t}\n\t}\n\t&__actions {\n\t\tmargin-left: auto;\n\t}\n}\n"],sourceRoot:""}]),e.Z=s},52475:function(n,e,t){var r=t(87537),i=t.n(r),a=t(23645),s=t.n(a)()(i());s.push([n.id,".sharing-entry__internal .avatar-external[data-v-854dc2c6]{width:32px;height:32px;line-height:32px;font-size:18px;background-color:var(--color-text-maxcontrast);border-radius:50%;flex-shrink:0}.sharing-entry__internal .icon-checkmark-color[data-v-854dc2c6]{opacity:1}","",{version:3,sources:["webpack://./apps/files_sharing/src/components/SharingEntryInternal.vue"],names:[],mappings:"AAwGC,2DACC,UAAA,CACA,WAAA,CACA,gBAAA,CACA,cAAA,CACA,8CAAA,CACA,iBAAA,CACA,aAAA,CAED,gEACC,SAAA",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.sharing-entry__internal {\n\t.avatar-external {\n\t\twidth: 32px;\n\t\theight: 32px;\n\t\tline-height: 32px;\n\t\tfont-size: 18px;\n\t\tbackground-color: var(--color-text-maxcontrast);\n\t\tborder-radius: 50%;\n\t\tflex-shrink: 0;\n\t}\n\t.icon-checkmark-color {\n\t\topacity: 1;\n\t}\n}\n"],sourceRoot:""}]),e.Z=s},78230:function(n,e,t){var r=t(87537),i=t.n(r),a=t(23645),s=t.n(a)()(i());s.push([n.id,".sharing-entry[data-v-656b538e]{display:flex;align-items:center;min-height:44px}.sharing-entry__desc[data-v-656b538e]{display:flex;flex-direction:column;justify-content:space-between;padding:8px;line-height:1.2em;overflow:hidden}.sharing-entry__desc h5[data-v-656b538e]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.sharing-entry__desc p[data-v-656b538e]{color:var(--color-text-maxcontrast)}.sharing-entry:not(.sharing-entry--share) .sharing-entry__actions .new-share-link[data-v-656b538e]{border-top:1px solid var(--color-border)}.sharing-entry[data-v-656b538e]  .avatar-link-share{background-color:var(--color-primary)}.sharing-entry .sharing-entry__action--public-upload[data-v-656b538e]{border-bottom:1px solid var(--color-border)}.sharing-entry__loading[data-v-656b538e]{width:44px;height:44px;margin:0;padding:14px;margin-left:auto}.sharing-entry .action-item[data-v-656b538e]{margin-left:auto}.sharing-entry .action-item~.action-item[data-v-656b538e],.sharing-entry .action-item~.sharing-entry__loading[data-v-656b538e]{margin-left:0}.sharing-entry .icon-checkmark-color[data-v-656b538e]{opacity:1}.sharing-entry__desc[data-v-656b538e]{overflow:inherit !important}#app[data-v-656b538e]{min-width:250px}","",{version:3,sources:["webpack://./apps/files_sharing/src/components/SharingEntryLink.vue"],names:[],mappings:"AA+rBA,gCACC,YAAA,CACA,kBAAA,CACA,eAAA,CACA,sCACC,YAAA,CACA,qBAAA,CACA,6BAAA,CACA,WAAA,CACA,iBAAA,CACA,eAAA,CAEA,yCACC,sBAAA,CACA,eAAA,CACA,kBAAA,CAED,wCACC,mCAAA,CAKD,mGACC,wCAAA,CAIF,oDACC,qCAAA,CAGD,sEACC,2CAAA,CAGD,yCACC,UAAA,CACA,WAAA,CACA,QAAA,CACA,YAAA,CACA,gBAAA,CAKD,6CACC,gBAAA,CACA,+HAEC,aAAA,CAIF,sDACC,SAAA,CAIF,sCACC,2BAAA,CAGD,sBACC,eAAA",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.sharing-entry {\n\tdisplay: flex;\n\talign-items: center;\n\tmin-height: 44px;\n\t&__desc {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tjustify-content: space-between;\n\t\tpadding: 8px;\n\t\tline-height: 1.2em;\n\t\toverflow: hidden;\n\n\t\th5 {\n\t\t\ttext-overflow: ellipsis;\n\t\t\toverflow: hidden;\n\t\t\twhite-space: nowrap;\n\t\t}\n\t\tp {\n\t\t\tcolor: var(--color-text-maxcontrast);\n\t\t}\n\t}\n\n\t&:not(.sharing-entry--share) &__actions {\n\t\t.new-share-link {\n\t\t\tborder-top: 1px solid var(--color-border);\n\t\t}\n\t}\n\n\t::v-deep .avatar-link-share {\n\t\tbackground-color: var(--color-primary);\n\t}\n\n\t.sharing-entry__action--public-upload {\n\t\tborder-bottom: 1px solid var(--color-border);\n\t}\n\n\t&__loading {\n\t\twidth: 44px;\n\t\theight: 44px;\n\t\tmargin: 0;\n\t\tpadding: 14px;\n\t\tmargin-left: auto;\n\t}\n\n\t// put menus to the left\n\t// but only the first one\n\t.action-item {\n\t\tmargin-left: auto;\n\t\t~ .action-item,\n\t\t~ .sharing-entry__loading {\n\t\t\tmargin-left: 0;\n\t\t}\n\t}\n\n\t.icon-checkmark-color {\n\t\topacity: 1;\n\t}\n}\n\n.sharing-entry__desc {\n\toverflow: inherit !important;\n}\n\n#app {\n\tmin-width: 250px;\n}\n"],sourceRoot:""}]),e.Z=s},35917:function(n,e,t){var r=t(87537),i=t.n(r),a=t(23645),s=t.n(a)()(i());s.push([n.id,".sharing-entry[data-v-1436bf4a]{display:flex;align-items:center;min-height:44px}.sharing-entry__desc[data-v-1436bf4a]{padding:8px;line-height:1.2em;position:relative;flex:1 1;min-width:0}.sharing-entry__desc h5[data-v-1436bf4a]{white-space:nowrap;text-overflow:ellipsis;overflow:hidden;max-width:inherit}.sharing-entry__desc p[data-v-1436bf4a]{color:var(--color-text-maxcontrast)}.sharing-entry__actions[data-v-1436bf4a]{margin-left:auto !important}","",{version:3,sources:["webpack://./apps/files_sharing/src/components/SharingEntrySimple.vue"],names:[],mappings:"AA4EA,gCACC,YAAA,CACA,kBAAA,CACA,eAAA,CACA,sCACC,WAAA,CACA,iBAAA,CACA,iBAAA,CACA,QAAA,CACA,WAAA,CACA,yCACC,kBAAA,CACA,sBAAA,CACA,eAAA,CACA,iBAAA,CAED,wCACC,mCAAA,CAGF,yCACC,2BAAA",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.sharing-entry {\n\tdisplay: flex;\n\talign-items: center;\n\tmin-height: 44px;\n\t&__desc {\n\t\tpadding: 8px;\n\t\tline-height: 1.2em;\n\t\tposition: relative;\n\t\tflex: 1 1;\n\t\tmin-width: 0;\n\t\th5 {\n\t\t\twhite-space: nowrap;\n\t\t\ttext-overflow: ellipsis;\n\t\t\toverflow: hidden;\n\t\t\tmax-width: inherit;\n\t\t}\n\t\tp {\n\t\t\tcolor: var(--color-text-maxcontrast);\n\t\t}\n\t}\n\t&__actions {\n\t\tmargin-left: auto !important;\n\t}\n}\n"],sourceRoot:""}]),e.Z=s},84721:function(n,e,t){var r=t(87537),i=t.n(r),a=t(23645),s=t.n(a)()(i());s.push([n.id,".sharing-input{width:100%;margin:10px 0}.sharing-input .multiselect__option span[lookup] .avatardiv{background-image:var(--icon-search-fff);background-repeat:no-repeat;background-position:center;background-color:var(--color-text-maxcontrast) !important}.sharing-input .multiselect__option span[lookup] .avatardiv div{display:none}","",{version:3,sources:["webpack://./apps/files_sharing/src/components/SharingInput.vue"],names:[],mappings:"AA2oBA,eACC,UAAA,CACA,aAAA,CAKE,4DACC,uCAAA,CACA,2BAAA,CACA,0BAAA,CACA,yDAAA,CACA,gEACC,YAAA",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.sharing-input {\n\twidth: 100%;\n\tmargin: 10px 0;\n\n\t// properly style the lookup entry\n\t.multiselect__option {\n\t\tspan[lookup] {\n\t\t\t.avatardiv {\n\t\t\t\tbackground-image: var(--icon-search-fff);\n\t\t\t\tbackground-repeat: no-repeat;\n\t\t\t\tbackground-position: center;\n\t\t\t\tbackground-color: var(--color-text-maxcontrast) !important;\n\t\t\t\tdiv {\n\t\t\t\t\tdisplay: none;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n"],sourceRoot:""}]),e.Z=s},59569:function(n,e,t){var r=t(87537),i=t.n(r),a=t(23645),s=t.n(a)()(i());s.push([n.id,".sharing-note[data-v-ac0277b2]{width:100%;height:200px}.note-title[data-v-ac0277b2]{font-weight:bold}","",{version:3,sources:["webpack://./apps/files_sharing/src/components/SharingNotes.vue"],names:[],mappings:"AA6MA,+BACC,UAAA,CACA,YAAA,CAED,6BACC,gBAAA",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.sharing-note {\n\twidth: 100%;\n\theight: 200px;\n}\n.note-title {\n\tfont-weight: bold;\n}\n"],sourceRoot:""}]),e.Z=s},60486:function(n,e,t){var r=t(87537),i=t.n(r),a=t(23645),s=t.n(a)()(i());s.push([n.id,".action-input__label{display:none !important}.password-message{margin-left:43px}.readonly-message{margin-left:43px}.filedrop-message{margin-left:43px}","",{version:3,sources:["webpack://./apps/files_sharing/src/components/SharingPermissions.vue"],names:[],mappings:"AAmlBA,qBACC,uBAAA,CAED,kBACC,gBAAA,CAED,kBACC,gBAAA,CAED,kBACC,gBAAA",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.action-input__label {\n\tdisplay: none !important;\n}\n.password-message {\n\tmargin-left: 43px;\n}\n.readonly-message {\n\tmargin-left: 43px;\n}\n.filedrop-message {\n\tmargin-left: 43px;\n}\n"],sourceRoot:""}]),e.Z=s},93591:function(n,e,t){var r=t(87537),i=t.n(r),a=t(23645),s=t.n(a)()(i());s.push([n.id,".sharing-entry__inherited .avatar-shared[data-v-49ffd834]{width:32px;height:32px;line-height:32px;font-size:18px;background-color:var(--color-text-maxcontrast);border-radius:50%;flex-shrink:0}","",{version:3,sources:["webpack://./apps/files_sharing/src/views/SharingInherited.vue"],names:[],mappings:"AA6JC,0DACC,UAAA,CACA,WAAA,CACA,gBAAA,CACA,cAAA,CACA,8CAAA,CACA,iBAAA,CACA,aAAA",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.sharing-entry__inherited {\n\t.avatar-shared {\n\t\twidth: 32px;\n\t\theight: 32px;\n\t\tline-height: 32px;\n\t\tfont-size: 18px;\n\t\tbackground-color: var(--color-text-maxcontrast);\n\t\tborder-radius: 50%;\n\t\tflex-shrink: 0;\n\t}\n}\n"],sourceRoot:""}]),e.Z=s},79222:function(n,e,t){var r=t(87537),i=t.n(r),a=t(23645),s=t.n(a)()(i());s.push([n.id,".emptyContentWithSections[data-v-500974a6]{margin:1rem auto}.your-shares[data-v-500974a6]{font-weight:bold}","",{version:3,sources:["webpack://./apps/files_sharing/src/views/SharingTab.vue"],names:[],mappings:"AA6aA,2CACC,gBAAA,CAED,8BACC,gBAAA",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.emptyContentWithSections {\n\tmargin: 1rem auto;\n}\n.your-shares {\n\tfont-weight: bold;\n}\n"],sourceRoot:""}]),e.Z=s},46788:function(n,e,t){var r=t(87537),i=t.n(r),a=t(23645),s=t.n(a)()(i());s.push([n.id,'\n.custom-select[data-v-6673cd0e] {\n\tposition: relative;\n\twidth: 100%;\n\ttext-align: left;\n\toutline: none;\n\theight: 47px;\n\tline-height: 47px;\n}\n.custom-select .selected[data-v-6673cd0e] {\n\tbackground-color: #fff;\n\tborder-radius: 6px;\n\tborder: 1px solid #666666;\n\tpadding-left: 1em;\n\tcursor: pointer;\n\tuser-select: none;\n}\n.custom-select .selected.open[data-v-6673cd0e] {\n\tborder: 1px solid #ad8225;\n\tborder-radius: 6px 6px 0px 0px;\n}\n\n/* .custom-select .selected:after {\n\tposition: absolute;\n\tcontent: "";\n\ttop: 22px;\n\tright: 1em;\n\twidth: 0;\n\theight: 0;\n\tborder: 5px solid transparent;\n\tborder-color: #0a0a0a transparent transparent transparent;\n} */\n.custom-select .items[data-v-6673cd0e] {\n\tborder-radius: 0px 0px 6px 6px;\n\toverflow: hidden;\n\tborder-right: 1px solid #ad8225;\n\tborder-left: 1px solid #ad8225;\n\tborder-bottom: 1px solid #ad8225;\n\tposition: absolute;\n\tbackground-color: #fff;\n\tleft: 0;\n\tright: 0;\n\tz-index: 1;\n}\n.custom-select .items div[data-v-6673cd0e] {\n\tpadding-left: 1em;\n\tcursor: pointer;\n\tuser-select: none;\n}\n.custom-select .items div[data-v-6673cd0e]:hover {\n\tbackground-color: #ad8225;\n}\n.selectHide[data-v-6673cd0e] {\n\tdisplay: none;\n}\n',"",{version:3,sources:["webpack://./apps/files_sharing/src/components/CustomSelect.vue"],names:[],mappings:";AAgHA;CACA,kBAAA;CACA,WAAA;CACA,gBAAA;CACA,aAAA;CACA,YAAA;CACA,iBAAA;AACA;AAEA;CACA,sBAAA;CACA,kBAAA;CACA,yBAAA;CACA,iBAAA;CACA,eAAA;CACA,iBAAA;AACA;AAEA;CACA,yBAAA;CACA,8BAAA;AACA;;AAEA;;;;;;;;;GASA;AAEA;CACA,8BAAA;CACA,gBAAA;CACA,+BAAA;CACA,8BAAA;CACA,gCAAA;CACA,kBAAA;CACA,sBAAA;CACA,OAAA;CACA,QAAA;CACA,UAAA;AACA;AAEA;CACA,iBAAA;CACA,eAAA;CACA,iBAAA;AACA;AAEA;CACA,yBAAA;AACA;AAEA;CACA,aAAA;AACA",sourcesContent:['\x3c!--\n  - @copyright Copyright (c) 2021 Yogesh Shejwadkar <yogesh.shejwadkar@t-systems.com>\n  -\n  - @author Yogesh Shejwadkar <yogesh.shejwadkar@t-systems.com>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program. If not, see <http://www.gnu.org/licenses/>.\n  -\n  --\x3e\n\n<template>\n\t<div class="custom-select"\n\t\t:tabindex="tabindex"\n\t\t@blur="open = false">\n\t\t<div @click="open = isDisable ? open : !open" :class="isDisable ? \'disabledRow\' : null">\n\t\t\t<h5>{{ title }}</h5>\n\t\t\t<div class="selected" :class="{ open: open }">\n\t\t\t\t{{ selected.value }}\n\t\t\t\t<span class="sort-indicator icon-triangle-s"></span>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="items" :class="{ selectHide: !open }">\n\t\t\t<div\n\t\t\t\t:class="option.key == selected.key ? \'selectedItem\' : null"\n\t\t\t\tv-for="(option, i) of options"\n\t\t\t\t:key="i"\n\t\t\t\t@click="\n\t\t\t\t\tselected = option;\n\t\t\t\t\topen = false;\n\t\t\t\t\t$emit(\'input\', option.key);\n\t\t\t\t\tsetCurrentSelectedOption(option.key);\n\t\t\t\t">\n\t\t\t\t<span class="icon-select-check"></span>\n\t\t\t\t{{ option.value }}\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nexport default {\n\tprops: {\n\t\toptions: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tdefault: {\n\t\t\ttype: Number,\n\t\t\trequired: false,\n\t\t\tdefault: 0,\n\t\t},\n\t\ttabindex: {\n\t\t\ttype: Number,\n\t\t\trequired: false,\n\t\t\tdefault: 0,\n\t\t},\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: null,\n\t\t},\n\t\tisDisable: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tselected: this.getDefault(this.default),\n\t\t\topen: false,\n\t\t}\n\t},\n\tmounted() {\n\t\tthis.$emit(\'input\', this.selected)\n\t},\n\tmethods: {\n\t\tsetCurrentSelectedOption(option) {\n\t\t\tconsole.info(\'in setCurrentSelectedOption-\', option)\n\t\t\tthis.$emit(\'setSelectedOption\', option)\n\t\t},\n\n\t\tgetDefault(defaultOption) {\n\t\t\tlet defaultOpt = null\n\t\t\tif (defaultOption) {\n\t\t\t\tfor (let i = 0; i < Object.keys(this.options).length; i++) {\n\t\t\t\t// this.options.each(function() {\n\t\t\t\t\tif (this.options[i].key === defaultOption) {\n\t\t\t\t\t\tdefaultOpt = this.options[i]\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (Object.keys(this.options).length > 0) {\n\t\t\t\tdefaultOpt = this.options[0]\n\t\t\t}\n\t\t\treturn defaultOpt\n\t\t},\n\t}\n}\n<\/script>\n\n<style scoped>\n.custom-select {\n\tposition: relative;\n\twidth: 100%;\n\ttext-align: left;\n\toutline: none;\n\theight: 47px;\n\tline-height: 47px;\n}\n\n.custom-select .selected {\n\tbackground-color: #fff;\n\tborder-radius: 6px;\n\tborder: 1px solid #666666;\n\tpadding-left: 1em;\n\tcursor: pointer;\n\tuser-select: none;\n}\n\n.custom-select .selected.open {\n\tborder: 1px solid #ad8225;\n\tborder-radius: 6px 6px 0px 0px;\n}\n\n/* .custom-select .selected:after {\n\tposition: absolute;\n\tcontent: "";\n\ttop: 22px;\n\tright: 1em;\n\twidth: 0;\n\theight: 0;\n\tborder: 5px solid transparent;\n\tborder-color: #0a0a0a transparent transparent transparent;\n} */\n\n.custom-select .items {\n\tborder-radius: 0px 0px 6px 6px;\n\toverflow: hidden;\n\tborder-right: 1px solid #ad8225;\n\tborder-left: 1px solid #ad8225;\n\tborder-bottom: 1px solid #ad8225;\n\tposition: absolute;\n\tbackground-color: #fff;\n\tleft: 0;\n\tright: 0;\n\tz-index: 1;\n}\n\n.custom-select .items div {\n\tpadding-left: 1em;\n\tcursor: pointer;\n\tuser-select: none;\n}\n\n.custom-select .items div:hover {\n\tbackground-color: #ad8225;\n}\n\n.selectHide {\n\tdisplay: none;\n}\n</style>\n'],sourceRoot:""}]),e.Z=s}},r={};function i(n){var t=r[n];if(void 0!==t)return t.exports;var a=r[n]={id:n,loaded:!1,exports:{}};return e[n].call(a.exports,a,a.exports,i),a.loaded=!0,a.exports}i.m=e,i.amdD=function(){throw new Error("define cannot be used indirect")},i.amdO={},n=[],i.O=function(e,t,r,a){if(!t){var s=1/0;for(u=0;u<n.length;u++){t=n[u][0],r=n[u][1],a=n[u][2];for(var o=!0,l=0;l<t.length;l++)(!1&a||s>=a)&&Object.keys(i.O).every((function(n){return i.O[n](t[l])}))?t.splice(l--,1):(o=!1,a<s&&(s=a));if(o){n.splice(u--,1);var c=r();void 0!==c&&(e=c)}}return e}a=a||0;for(var u=n.length;u>0&&n[u-1][2]>a;u--)n[u]=n[u-1];n[u]=[t,r,a]},i.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return i.d(e,{a:e}),e},i.d=function(n,e){for(var t in e)i.o(e,t)&&!i.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:e[t]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(n){if("object"==typeof window)return window}}(),i.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},i.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},i.nmd=function(n){return n.paths=[],n.children||(n.children=[]),n},i.j=7870,function(){i.b=document.baseURI||self.location.href;var n={7870:0};i.O.j=function(e){return 0===n[e]};var e=function(e,t){var r,a,s=t[0],o=t[1],l=t[2],c=0;if(s.some((function(e){return 0!==n[e]}))){for(r in o)i.o(o,r)&&(i.m[r]=o[r]);if(l)var u=l(i)}for(e&&e(t);c<s.length;c++)a=s[c],i.o(n,a)&&n[a]&&n[a][0](),n[a]=0;return i.O(u)},t=self.webpackChunknextcloud=self.webpackChunknextcloud||[];t.forEach(e.bind(null,0)),t.push=e.bind(null,t.push.bind(t))}(),i.nc=void 0;var a=i.O(void 0,[7874],(function(){return i(42514)}));a=i.O(a)}();
//# sourceMappingURL=files_sharing-files_sharing_tab.js.map?v=a3ba9d1f574ebe3c2b62